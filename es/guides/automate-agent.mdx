---
title: "Tutorial: Actualiza automáticamente la documentación cuando cambie el código"
sidebarTitle: "Automatiza las actualizaciones de la documentación"
description: "Usa la API del agente para actualizar automáticamente tu documentación."
keywords: ["automatización con agente", "n8n", "GitHub Actions", "actualizaciones automáticas de la documentación"]
---

<div id="what-you-will-build">
  ## Qué vas a construir
</div>

Una automatización que actualiza tu documentación cuando se hace push de código a tu branch principal. El flujo de trabajo se puede crear en varias plataformas, incluidas GitHub Actions y n8n. Supervisa tu repositorio de código y luego llama a la API del agente para actualizar tu documentación en un repositorio de documentación independiente.

Este flujo de trabajo conecta dos repositorios separados:

- **Repositorio de código**: Donde almacenas el código de la aplicación. Configurarás el disparador de la automatización en este repositorio. Algunos ejemplos incluyen una API de backend, una aplicación de frontend, un SDK o una herramienta de CLI.
- **Repositorio de documentación**: Donde almacenas tu documentación y lo conectas a tu proyecto de Mintlify. El agente crea solicitudes de extracción con actualizaciones de documentación en este repositorio.

Este tutorial asume que tu documentación está en un repositorio separado del código de tu aplicación. Si tienes un monorepo, modifica el flujo de trabajo para apuntar al directorio donde almacenas tu documentación.

<div id="workflow-overview">
  ### Descripción general del flujo de trabajo
</div>

1. Alguien sube código a tu branch principal.
2. Se activa el flujo de trabajo.
3. El flujo de trabajo llama a la API del agente para actualizar tu documentación.
4. El agente crea una solicitud de extracción con actualizaciones de la documentación en tu repositorio de documentación.

<div id="choose-your-platform">
  ## Elige tu plataforma
</div>

<Tabs>
  <Tab title="GitHub Actions">
    GitHub Actions es la opción más simple si tu código ya está en GitHub. No se requieren servicios adicionales.

    ## Requisitos previos

    * GitHub Actions habilitadas en tus repositorios de código y de documentación
    * [key de la API de administración de Mintlify](https://dashboard.mintlify.com/settings/organization/api-keys)
    * [ID del proyecto de Mintlify](https://dashboard.mintlify.com/settings/organization/api-keys)
    * [Plan Pro o personalizado de Mintlify](https://mintlify.com/pricing)
    * Acceso de administrador a los repositorios de GitHub de tu código y documentación

    ### Obtén tu API key de administrador

    1. Navega a la página de [API keys](https://dashboard.mintlify.com/settings/organization/api-keys) en tu dashboard.
    2. Selecciona **Create Admin API Key**.
    3. Copia la key y guárdala de manera segura.

    ## Construye el flujo de trabajo

    ### Crear el archivo de flujo de trabajo

    1. En tu repositorio de código, crea un archivo nuevo: `.github/workflows/update-docs.yml`
    2. Añade este flujo de trabajo:

       ```yaml
       name: Actualizar Documentación

       on:
       push:
           branches:
           - main

       jobs:
       update-docs:
           runs-on: ubuntu-latest
           steps:
           - uses: actions/github-script@v8
               env:
               MINTLIFY_API_KEY: ${{ secrets.MINTLIFY_API_KEY }}
               PROJECT_ID: ${{ secrets.MINTLIFY_PROJECT_ID }}
               with:
               script: |
                   const { owner, repo } = context.repo;
                   const projectId = process.env.PROJECT_ID;
                   const apiKey = process.env.MINTLIFY_API_KEY;

                   if (!projectId || !apiKey) {
                   core.setFailed('Faltan los secretos MINTLIFY_PROJECT_ID o MINTLIFY_API_KEY');
                   return;
                   }

                   const url = `https://api.mintlify.com/v1/agent/${projectId}/job`;
                   const payload = {
                   branch: `mintlify/docs-update-${Date.now()}`,
                   messages: [
                       {
                       role: 'system',
                       content: 'Eres un ejecutor de acciones que actualiza la documentación según los cambios en el código. Nunca debes hacer preguntas. Si no puedes acceder al repositorio, informa el error y finaliza.'
                       },
                       {
                       role: 'user',
                       content: `Actualiza la documentación para nuestros pushes recientes a main:\n\nRepositorio: ${owner}/${repo}`
                       }
                   ]
                   };

                   try {
                       const response = await fetch(url, {
                       method: 'POST',
                       headers: {
                           'Authorization': `Bearer ${apiKey}`,
                           'Content-Type': 'application/json'
                       },
                       body: JSON.stringify(payload)
                       });

                       if (!response.ok) {
                       throw new Error(`La solicitud de API falló con estado ${response.status}: ${await response.text()}`);
                       }

                       const reader = response.body.getReader();
                       const decoder = new TextDecoder();
                       let buffer = '';

                       while (true) {
                       const { done, value } = await reader.read();
                       if (done) break;
                       buffer += decoder.decode(value, { stream: true });
                       const lines = buffer.split('\n');
                       buffer = lines.pop() || '';
                       for (const line of lines) {
                           if (line.trim()) {
                           console.log(line);
                           }
                       }
                       }
                       if (buffer.trim()) {
                       console.log(buffer);
                       }

                       core.notice(`Trabajo de actualización de documentación iniciado para ${owner}/${repo}`);
                   } catch (error) {
                       core.setFailed(`No se pudo crear el trabajo de actualización de documentación: ${error.message}`);
                   }
       ```

    ### Agregar secretos

    1. En tu repositorio, ve a **Settings** → **Secrets and variables** → **Actions**.
    2. Haz clic en **New repository secret**.
    3. Añade los siguientes secretos:
       * Nombre: `MINTLIFY_API_KEY`, Secreto: Tu clave de administración de la API de Mintlify
       * Nombre: `MINTLIFY_PROJECT_ID`, Secreto: Tu ID de proyecto de Mintlify (se encuentra en la página de [API keys](https://dashboard.mintlify.com/settings/organization/api-keys) de tu dashboard)

    Para obtener más información, consulta [Using secrets in GitHub Actions](https://docs.github.com/en/actions/how-tos/write-workflows/choose-what-workflows-do/use-secrets) en la documentación de GitHub.

    ## Prueba la automatización

    1. Haz un pequeño cambio en tu repositorio de código y haz push a main:
       ```bash
       git add .
       git commit -m "Prueba: activar automatización de docs"
       git push origin main
       ```

    2. Consulta la pestaña **Actions** en tu repositorio de código para ver el flujo de trabajo en ejecución.

    3. Después de que se ejecute el flujo de trabajo, revisa tu repositorio de documentación para ver una nueva branch y una solicitud de extracción con actualizaciones de la documentación.

    ## Solución de problemas

    ### El flujo de trabajo no se está ejecutando

    * Verifica que GitHub Actions esté habilitado en tu repositorio.
    * Revisa la pestaña **Actions** para ver mensajes de error.
    * Asegúrate de que el archivo de flujo de trabajo esté en `.github/workflows/` y tenga la extensión `.yml`.

    ### Error 401 de la API del agente

    * Verifica que tu key de la API comience con `mint_`.
    * Comprueba que el encabezado Authorization esté formateado como `Bearer mint_yourkey`.
    * Confirma que la API key corresponda a la organización correcta de Mintlify.

    ### Las actualizaciones de documentación no aparecen

    * Verifica que el repositorio de documentación esté conectado a tu proyecto de Mintlify.
    * Verifica que el agente tenga permiso de escritura en el repositorio de documentación.
    * Consulta los registros del flujo de trabajo para ver los mensajes de error del agente.
  </Tab>

  <Tab title="n8n">
    n8n ofrece un editor visual de flujos de trabajo y puede integrarse con múltiples servicios.

    ## Requisitos previos

    * workspace de n8n
    * key de la API de administración de Mintlify
    * [Plan Pro o Personalizado de Mintlify](https://mintlify.com/pricing)
    * Acceso de administración a los repositorios de GitHub para tu código y documentación
    * Token de acceso personal de GitHub

    ### Obtén tu API key de administrador

    1. Ve a la página de [API keys](https://dashboard.mintlify.com/settings/organization/api-keys) en tu dashboard.
    2. Selecciona **Create Admin API Key**.
    3. Copia la key y guárdala de manera segura.

    ### Obtén tu token de acceso personal de GitHub

    1. En GitHub, ve a **Settings**.
    2. Haz clic en **Configuración de desarrollador**.
    3. Haz clic en **Tokens de acceso personal**.
    4. Haz clic en **Tokens (clásicos)**.
    5. Haz clic en **Generate new token (classic)**.
    6. Selecciona estos permisos:
       * `repo` (control total de los repositorios privados)
       * `admin:repo_hook` (si quieres que n8n cree webhooks)
    7. Genera y guarda el token de manera segura.

    Para obtener más información, consulta [Creating a personal access token (classic)](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens?versionId=free-pro-team%40latest\&productId=account-and-profile#creating-a-personal-access-token-classic) en la documentación de GitHub.

    ## Construye el flujo de trabajo

    ### Crear el activador de webhook

    1. En n8n, crea un nuevo workflow.
    2. Añade un nodo de webhook.
    3. Configura el webhook:
       * Método HTTP: `POST`
       * Ruta: `auto-update-documentation` (o cualquier ruta única)
       * Autenticación: Ninguna
       * Responder: De inmediato
    4. Guarda el flujo de trabajo.
    5. Copia la URL del webhook de producción. Tiene este formato: `https://your-n8n-instance.app.n8n.cloud/webhook/auto-update-documentation`

    <Frame>
      <img
        src="/images/guides/n8n/webhook-node.png"
        alt="Captura de pantalla de la configuración del nodo webhook."
        style={{
width: 'auto',
height: '700px',
}}
      />
    </Frame>

    ### Configurar el webhook de GitHub

    1. Navega a tu repositorio de código en GitHub.
    2. Haz clic en **Settings**.
    3. Haz clic en **Webhooks**.
    4. Haz clic en **Add webhook**.
    5. Configura el webhook:
       * URL de carga útil: pega tu URL de webhook de n8n
       * Tipo de contenido: `application/json`
       * ¿Qué eventos quieres que activen este webhook?
         * Selecciona **Let me select individual events.**
         * Selecciona solo **Push events**.
       * Selecciona **Active**
    6. Haz clic en **Add webhook**.

    ### Filtrar pushes al branch principal

    Añade un nodo de código después del webhook para filtrar los pushes a main y extraer la información relevante.

    1. Añade un nodo de código.
    2. Nómbralo &quot;Filtrar envíos principales&quot;.
    3. Establece el modo en **Ejecutar una vez para todos los elementos**.
    4. Añade este JavaScript:

    ```javascript
    const webhookData = $input.first().json.body;

    // Solo continuar si es un push a main
    if (webhookData.ref !== "refs/heads/main") {
      return [];
    }

    // Extraer información
    const repository = webhookData.repository;
    const pusher = webhookData.pusher;

    // Construir mensaje para el agente
    const agentMessage = `Actualiza la documentación para los cambios enviados a main en ${repository.name}. Siempre edita los archivos y crea una solicitud de extracción.`;

    return {
      json: {
        codeRepoName: repository.full_name,
        codeRepoShortName: repository.name,
        agentMessage: agentMessage
      }
    };
    ```

    <Frame>
      <img src="/images/guides/n8n/filter-merged-PRs-node.png" alt="Captura de pantalla de la configuración del nodo que filtra pushes a main." />
    </Frame>

    Este código detiene el flujo de trabajo si el push no fue a main, extrae toda la información relevante del webhook de GitHub y crea un mensaje para la API del agente.

    ### Llamar a la API del agente

    Añade un nodo de solicitud HTTP para crear un trabajo de documentación.

    1. Añade un nodo de solicitud HTTP.
    2. Ponle el nombre &quot;Create agent job.&quot;
    3. Configura la petición:

       * Método: `POST`
       * URL: `https://api.mintlify.com/v1/agent/YOUR_PROJECT_ID/job` (reemplaza `YOUR_PROJECT_ID` por tu ID de proyecto en la página de [API keys](https://dashboard.mintlify.com/settings/organization/api-keys))
       * Autenticación: Tipo de credencial genérica → Header Auth
         * Crea una credencial nueva:
           * Nombre: `Authorization`
           * Valor: `Bearer mint_YOUR_API_KEY` (reemplázalo por tu API key)
       * Enviar cuerpo: Activado
       * Tipo de contenido del cuerpo: JSON
       * Especificar cuerpo: Usando JSON
       * Agrega este JSON:

       ```json
       {
       "branch": "docs-update-from-{{ $json.codeRepoShortName }}-{{ $now.toISOString() }}",
       "messages": [
           {
           "role": "system",
           "content": "{{ $json.agentMessage }}"
           }
       ]
       }
       ```

    <Frame>
      <img
        src="/images/guides/n8n/create-agent-job-node.png"
        alt="Captura de pantalla de la configuración del nodo create agent job."
        style={{
width: 'auto',
height: '700px',
}}
      />
    </Frame>

    El agente crea una solicitud de extracción en tu repositorio de documentación utilizando un nombre de branch descriptivo que incluye el nombre del repositorio de origen y la marca de tiempo.

    ### Activar el flujo de trabajo

    1. Guarda tu flujo de trabajo.
    2. Establécelo como activo.

    Tu flujo de trabajo ahora está monitoreando tu repositorio de código para detectar cambios enviados a main.

    <Frame>
      <img src="/images/guides/n8n/workflow.png" alt="Captura del flujo de automatización en el editor de n8n." />
    </Frame>

    ## Prueba la automatización

    1. Crea una branch de prueba en tu repositorio de código:
       ```bash
       git checkout -b test-docs-automation
       ```

    2. Haz un pequeño cambio y confírmalo:
       ```bash
       git add .
       git commit -m "Prueba: activar automatización de docs"
       git push origin test-docs-automation
       ```

    3. Abre una solicitud de extracción en GitHub.

    4. Fusiona la solicitud de extracción.

    ### Verificar la automatización

    Deberías ver una nueva ejecución de n8n con todos los nodos completados exitosamente, y un nuevo branch y solicitud de extracción en tu repositorio de documentación.

    ## Solución de problemas

    ### El webhook no se está activando

    * Verifica que el flujo de trabajo esté activo en n8n.
    * Consulta la sección Settings → Webhooks → Recent Deliveries del repositorio de GitHub para ver el código de respuesta.
    * Confirma que la URL del webhook coincida exactamente con la URL del webhook de n8n.

    ### Error 401 de la API del agente

    * Verifica que tu key de la API comience con `mint_`.
    * Verifica que el encabezado Authorization esté formateado como `Bearer mint_yourkey`.
    * Confirma que la API key corresponde a la organización correcta de Mintlify.

    ### Error 401 de GitHub

    * Verifica que tu token tenga el ámbito `repo`.
    * Comprueba que el token no haya caducado.
    * Confirma que incluiste el encabezado `User-Agent` en la solicitud a GitHub.
  </Tab>
</Tabs>