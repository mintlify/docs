---
title: "AWS Route 53 y CloudFront"
sidebarTitle: "AWS"
description: "Aloja la documentación en una subruta personalizada con servicios de AWS"
---

import Propagating from "/snippets/es/custom-subpath-propagating.mdx";

Para alojar tu documentación en una subruta personalizada como `yoursite.com/docs` con AWS Route 53 y CloudFront, debes configurar tu proveedor de DNS para que apunte a tu distribución de CloudFront.


<div id="repository-structure">
  ## Estructura del repositorio
</div>

Los archivos de documentación deben organizarse en tu repositorio para ajustarse a la estructura de subruta que elijas. Por ejemplo, si quieres que tu documentación esté en `yoursite.com/docs`, crea un directorio `docs/` con todos tus archivos de documentación.

<div id="high-level-overview">
  ## Descripción general
</div>

Encamina el tráfico a estas rutas con una política de caché **CachingDisabled**:

- `/.well-known/acme-challenge/*` - Requerido para la verificación de certificados de Let's Encrypt
- `/.well-known/vercel/*` - Requerido para la verificación de dominio
- `/docs/*` - Requerido para el enrutamiento por subruta
- `/docs/` - Requerido para el enrutamiento por subruta

Encamina el tráfico a esta ruta con una política de caché **CachingEnabled**:

- `/mintlify-assets/_next/static/*`
- `Default (*)` - La página de inicio de tu sitio web

Todos los comportamientos deben tener una **política de solicitud de origen** de `AllViewerExceptHostHeader`.

![CloudFront "Behaviors" page with 4 behaviors: `/docs/*`, `/docs`, `Default`, and `/.well-known/*`.](/images/cloudfront/all-behaviors.png)

<div id="create-cloudfront-distribution">
  ## Crear una distribución de CloudFront
</div>

1. Ve a [CloudFront](https://aws.amazon.com/cloudfront) en la consola de AWS.
2. Selecciona **Create distribution**.

<Frame>
    ![Página de CloudFront Distributions con el botón "Create distribution" resaltado.](/images/cloudfront/create-distribution.png)
  </Frame>

3. En Origin domain, ingresa `[SUBDOMAIN].mintlify.dev`, donde `[SUBDOMAIN]` es el subdominio único de tu proyecto.

<Frame>
    ![Página de CloudFront "Create distribution" que muestra "acme.mintlify.dev" como el dominio de origen.](/images/cloudfront/origin-name.png)
  </Frame>

4. En "Web Application Firewall (WAF)", habilita las protecciones de seguridad.

<Frame>
    ![Opciones de Web Application Firewall (WAF) con "Enable security protections" seleccionado.](/images/cloudfront/enable-security-protections.png)
  </Frame>

5. Deja el resto de la configuración con los valores predeterminados.
6. Selecciona **Create distribution**.

<div id="add-default-origin">
  ## Agregar origen predeterminado
</div>

1. Después de crear la distribución, ve a la pestaña "Origins".

<Frame>
    ![Una distribución de CloudFront con la pestaña "Origins" resaltada.](/images/cloudfront/origins.png)
  </Frame>

2. Busca la URL de staging que refleje el dominio principal. Esto varía mucho según cómo esté alojada tu landing page. Por ejemplo, la URL de staging de Mintlify es [mintlify-landing-page.vercel.app](https://mintlify-landing-page.vercel.app).

<Info>
  Si tu landing page está alojada en Webflow, usa la URL de staging de Webflow. Se verá como `.webflow.io`.

  Si usas Vercel, utiliza el dominio `.vercel.app` disponible para cada proyecto.
</Info>

3. Crea un nuevo Origin y agrega tu URL de staging como el "Origin domain".

<Frame>
    ![Página de CloudFront "Create origin" con el campo de entrada "Origin domain" resaltado.](/images/cloudfront/default-origin.png)
  </Frame>

A este punto, deberías tener dos Origins: uno con `[SUBDOMAIN].mintlify.app` y otro con tu URL de staging.

<Frame>
  ![Página de CloudFront "Origins" con dos orígenes: uno para `mintlify` y otro para `mintlify-landing-page`.](/images/cloudfront/final-origins.png)
</Frame>

<div id="set-behaviors">
  ## Configurar comportamientos
</div>

Los comportamientos en CloudFront permiten controlar la lógica de subrutas. A alto nivel, queremos crear la siguiente lógica:

- **Si un usuario llega a tu subruta personalizada**, ir a `[SUBDOMAIN].mintlify.dev`.
- **Si un usuario llega a cualquier otra página**, ir a la página de inicio actual.

1. Navega a la pestaña "Behaviors" de tu distribución de CloudFront.

<Frame>
	![Pestaña "Behaviors" de CloudFront resaltada.](/images/cloudfront/behaviors.png)
</Frame>

2. Selecciona el botón **Create behavior** y crea los siguientes comportamientos.

<div id="well-known">
  ### `/.well-known/*`
</div>

Crea comportamientos para las rutas de verificación de dominios de Vercel con un **Patrón de ruta** `/.well-known/*` y configura **Origin and origin groups** a la URL de tu documentación.

Para "Cache policy", selecciona **CachingDisabled** para que estas solicitudes de verificación pasen sin caché.

<Frame>
  ![Página de CloudFront "Create behavior" con un "Path pattern" de "/.well-known/*" y "Origin and origin groups" apuntando a la URL de staging.](/images/cloudfront/well-known-policy.png)
</Frame>

<Info>
Si `.well-known/*` es demasiado genérico, puedes reducirlo a un mínimo de 2 comportamientos para Vercel:
  - `/.well-known/vercel/*` - Requerido para la verificación de dominios de Vercel
  - `/.well-known/acme-challenge/*` - Requerido para la verificación de certificados de Let's Encrypt
</Info>

<div id="your-custom-subpath">
  ### Tu subruta personalizada
</div>

Crea un comportamiento con un **Patrón de ruta** de la subruta que elijas, por ejemplo `/docs`, con **Origen y grupos de origen** apuntando a la URL `.mintlify.dev` (en nuestro caso `acme.mintlify.dev`).

- Configura "Cache policy" en **CachingOptimized**.
- Configura "Origin request policy" en **AllViewerExceptHostHeader**.
- Configura "Viewer Protocol Policy" en **Redirect HTTP to HTTPS**.

<Frame>
  ![Página de CloudFront "Create behavior" con un "Path pattern" de "/docs/*" y "Origin and origin groups" apuntando a la URL `acme.mintlify.dev`.](/images/cloudfront/behavior-1.png)
</Frame>

<div id="your-custom-subpath-with-wildcard">
  ### Tu subruta personalizada con comodín
</div>

Crea un comportamiento con un **patrón de ruta** de la subruta que elijas seguida de `/*`, por ejemplo `/docs/*`, y **origen y grupos de origen** que apunten a la misma URL `.mintlify.dev`.

Estos ajustes deben coincidir exactamente con el comportamiento de tu subruta base, con la excepción del **patrón de ruta**.

- Configura "Cache policy" como **CachingOptimized**.
- Configura "Origin request policy" como **AllViewerExceptHostHeader**.
- Configura "Viewer protocol policy" como **Redirect HTTP to HTTPS**.

<div id="mintlify-assets_nextstatic">
  ### `/mintlify-assets/_next/static/*`
</div>

- Establece la "Cache policy" en **CachingOptimized**
 - Establece la "Origin request policy" en **AllViewerExceptHostHeader**
 - Establece la "Viewer protocol policy" en **Redirect HTTP to HTTPS**

<div id="default">
  ### `Default (*)`
</div>

Por último, vamos a editar el comportamiento `Default (*)`.

<Frame>
  ![Una distribución de CloudFront con el comportamiento "Default (*)" seleccionado y el botón Edit destacado.](/images/cloudfront/default-behavior-1.png)
</Frame>

1. Cambia **Origin and origin groups** del comportamiento predeterminado a la URL de staging (en nuestro caso, `mintlify-landing-page.vercel.app`).

<Frame>
  ![Página de CloudFront "Edit behavior" con el campo de entrada "Origin and origin groups" resaltado.](/images/cloudfront/default-behavior-2.png)
</Frame>

2. Selecciona **Save changes**.

<div id="check-behaviors-are-set-up-correctly">
  ### Verifica que los comportamientos estén configurados correctamente
</div>

Si sigues los pasos anteriores, tus comportamientos deberían verse así:

<Frame>
  ![Página de CloudFront "Behaviors" con 4 comportamientos: `/docs/*`, `/docs`, `Default` y `/.well-known/*`.](/images/cloudfront/all-behaviors.png)
</Frame>

<div id="preview-distribution">
  ## Vista previa de la distribución
</div>

Ahora puedes comprobar si tu distribución está configurada correctamente yendo a la pestaña "General" y visitando la URL de **Distribution domain name**.

<Frame>
  ![Pestaña "General" de CloudFront con la URL de "Distribution domain name" resaltada.](/images/cloudfront/preview-distribution.png)
</Frame>

Todas las páginas deberían redirigir a tu página principal, pero si añades la subruta que elegiste, por ejemplo `/docs`, a la URL, deberías ver que te lleva a tu instancia de documentación de Mintlify.

<div id="connect-with-route53">
  ## Conectar con Route53
</div>

Ahora vamos a llevar la funcionalidad de la distribución de CloudFront a tu dominio principal.

<Note>
  Para esta sección, también puedes consultar la guía oficial de AWS sobre [Configurar
  Amazon Route 53 para enrutar tráfico a una
  distribución de CloudFront](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-to-cloudfront-distribution.html#routing-to-cloudfront-distribution-config)
</Note>

1. Ve a [Route53](https://aws.amazon.com/route53) en la consola de AWS.
2. Entra en la “Hosted zone” de tu dominio principal.
3. Selecciona **Create record**.

<Frame>
  ![Página “Records” de Route 53 con el botón “Create record” resaltado.](/images/cloudfront/route53-create-record.png)
</Frame>

4. Activa `Alias` y luego, en **Route traffic to**, selecciona la opción `Alias to CloudFront distribution`.

<Frame>
  ![Página “Create record” de Route 53 con el interruptor “Alias” y el menú “Route traffic to” resaltados.](/images/cloudfront/create-record-alias.png)
</Frame>

5. Selecciona **Create records**.

<Note>
  Es posible que debas eliminar el registro A existente si ya hay uno.
</Note>

Tu documentación ahora está activa en la subruta elegida de tu dominio principal.

<Propagating />