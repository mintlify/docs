---
title: "Tutorial: Build an in-app documentation assistant"
sidebarTitle: "Build an in-app assistant"
description: "Embed the assistant in your application to answer questions with information from your documentation"
---

## What you will build

A reusable React component that embeds the Mintlify assistant directly in your application. The component provides:

- A toggle button that opens a chat panel
- Real-time streaming responses based on information from your documentation
- Source citations that link to your documentation

Users can get help with your product without leaving your application.

## Prerequisites

- Mintlify Pro or Custom plan
- Your Mintlify project ID (found in your [dashboard](https://dashboard.mintlify.com))
- An assistant API key
- Node.js and npm installed
- Basic React knowledge
- Existing React application (Next.js, Vite, Create React App, etc.)

### Get your assistant API key

1. Navigate to the [API keys](https://dashboard.mintlify.com/settings/organization/api-keys) page in your dashboard.
2. Select **Create Assistant API Key**.
3. Copy the assistant API key (starts with `mint_dsc_`) and save it securely.

<Note>
  The assistant API key is a public token that can be used in frontend code. Calls using this token count toward your plan's message allowance and can incur overages.
</Note>

## Build the widget

### Install dependencies

Install the AI SDK for React and a Markdown renderer:

```bash
npm install ai @ai-sdk/react react-markdown
```

### Create the assistant component

Create a new file `AssistantWidget.jsx` (or `.tsx` if using TypeScript) in your components directory:

```jsx AssistantWidget.jsx expandable
import { useChat } from '@ai-sdk/react';
import { useState, useRef, useEffect } from 'react';
import ReactMarkdown from 'react-markdown';

export function AssistantWidget({
  project,
  userId = 'anonymous',
  // Customize any of these default values to match your style and tone
  buttonColor = '#2563eb',
  accentColor = '#2563eb',
  position = 'bottom-right',
  headerTitle = 'Documentation assistant',
  headerSubtitle = 'Ask me anything about our docs',
  emptyStateText = 'How can I help you today?',
  inputPlaceholder = 'Ask a question...',
  sendButtonText = 'Send',
}) {
  const [isOpen, setIsOpen] = useState(false);
  const [threadId, setThreadId] = useState(null);
  const messagesEndRef = useRef(null);
  const closeButtonRef = useRef(null);

  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: `https://api-dsc.mintlify.com/v1/assistant/${project}/message`,
    headers: {
      'Authorization': `Bearer ${process.env.REACT_APP_MINTLIFY_TOKEN}`,
    },
    body: {
      fp: userId,
      threadId: threadId,
      retrievalPageSize: 5,
      filter: null,
    },
    fetch: async (url, options) => {
      const response = await fetch(url, options);
      const tempThreadId = response.headers.get('x-thread-id');
      if (tempThreadId) {
        setThreadId(tempThreadId);
      }
      return response;
    },
    streamProtocol: 'data',
    sendExtraMessageFields: true,
  });

  // Scroll to latest message
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [messages]);

  // Handle keyboard shortcuts
  useEffect(() => {
    const handleKeyDown = (e) => {
      if (e.key === 'Escape' && isOpen) {
        setIsOpen(false);
      }
    };
    if (isOpen) {
      document.addEventListener('keydown', handleKeyDown);
      return () => document.removeEventListener('keydown', handleKeyDown);
    }
  }, [isOpen]);

  // Focus management
  useEffect(() => {
    if (isOpen && closeButtonRef.current) {
      closeButtonRef.current.focus();
    }
  }, [isOpen]);

  // Helper function to convert hex to rgb
  const hexToRgb = (hex) => {
    const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : '37, 99, 235';
  };

  const getPositionClasses = () => {
    const positions = {
      'bottom-right': 'bottom-4 right-4',
      'bottom-left': 'bottom-4 left-4',
      'top-right': 'top-4 right-4',
      'top-left': 'top-4 left-4',
    };
    return positions[position] || positions['bottom-right'];
  };

  const panelPosition = {
    'bottom-right': 'bottom-20 right-4',
    'bottom-left': 'bottom-20 left-4',
    'top-right': 'top-20 right-4',
    'top-left': 'top-20 left-4',
  };

  return (
    <>
      {/* Toggle button */}
      <button
        onClick={() => setIsOpen(!isOpen)}
        className={`fixed ${getPositionClasses()} text-white rounded-full p-4 shadow-lg hover:shadow-xl transition-all z-50 focus:outline-none focus:ring-2 focus:ring-offset-2`}
        style={{ backgroundColor: buttonColor }}
        aria-label={isOpen ? 'Close documentation assistant' : 'Open documentation assistant'}
        aria-expanded={isOpen}
      >
        {isOpen ? (
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
          </svg>
        ) : (
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        )}
      </button>

      {/* Chat panel */}
      {isOpen && (
        <div
          className={`fixed ${panelPosition[position]} w-full sm:w-96 max-h-[85vh] sm:h-[600px] bg-white rounded-lg shadow-2xl flex flex-col z-50 border border-gray-200 m-2 sm:m-0`}
          role="region"
          aria-label="Documentation assistant chat panel"
        >
          {/* Header */}
          <div className="p-4 border-b border-gray-200 bg-gray-50 rounded-t-lg flex items-center justify-between">
            <div className="flex-1">
              <h3 className="font-semibold text-gray-900">{headerTitle}</h3>
              <p className="text-sm text-gray-600">{headerSubtitle}</p>
            </div>
            <button
              ref={closeButtonRef}
              onClick={() => setIsOpen(false)}
              className="ml-2 p-2 text-gray-500 hover:text-gray-700 focus:outline-none"
              aria-label="Close chat panel"
            >
              <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>

          {/* Messages */}
          <div className="flex-1 overflow-y-auto p-4 space-y-4">
            {messages.length === 0 && (
              <div className="text-gray-500 mt-8">
                <p>{emptyStateText}</p>
              </div>
            )}

            {messages.map((message) => (
              <div
                key={message.id}
                className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}
              >
                <div
                  className={`max-w-[80%] rounded-lg px-4 py-2 ${
                    message.role === 'user'
                      ? 'text-white'
                      : 'bg-gray-100 text-gray-900'
                  }`}
                  style={message.role === 'user' ? { backgroundColor: accentColor } : {}}
                >
                  {message.role === 'user' ? (
                    <div className="whitespace-pre-wrap">
                      {message.content}
                    </div>
                  ) : (
                    <ReactMarkdown
                      className="prose prose-sm max-w-none prose-p:my-2 prose-ul:my-2 prose-ol:my-2 prose-code:bg-gray-200 prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-pre:bg-gray-800 prose-pre:text-white"
                      components={{
                        p: ({ children }) => <p className="mb-2 last:mb-0">{children}</p>,
                        ul: ({ children }) => <ul className="mb-2 last:mb-0 ml-4">{children}</ul>,
                        ol: ({ children }) => <ol className="mb-2 last:mb-0 ml-4">{children}</ol>,
                        code: ({ inline, children }) =>
                          inline ? (
                            <code className="bg-gray-200 px-1 py-0.5 rounded text-sm">{children}</code>
                          ) : (
                            <code className="block bg-gray-800 text-white p-2 rounded text-sm overflow-x-auto">{children}</code>
                          ),
                      }}
                    >
                      {message.content}
                    </ReactMarkdown>
                  )}

                  {/* Display sources */}
                  {message.role === 'assistant' && message.parts && (
                    (() => {
                      const sources = message.parts
                        .filter(part =>
                          part.type === 'tool-invocation' &&
                          part.toolInvocation?.state === 'result' &&
                          part.toolInvocation?.toolName === 'search' &&
                          Array.isArray(part.toolInvocation?.result)
                        )
                        .flatMap(part => part.toolInvocation.result);

                      return sources.length > 0 ? (
                        <div className="mt-2 pt-2 border-t border-gray-300">
                          <p className="text-xs font-semibold mb-1">Sources:</p>
                          <ul className="text-xs space-y-1">
                            {sources.map((source, idx) => (
                              <li key={idx}>
                                <a
                                  href={source.url || `https://${project}.mintlify.app/${source.path}`}
                                  target="_blank"
                                  rel="noopener noreferrer"
                                  className="underline hover:no-underline"
                                >
                                  {source.metadata?.title || source.path}
                                </a>
                              </li>
                            ))}
                          </ul>
                        </div>
                      ) : null;
                    })()
                  )}
                </div>
              </div>
            ))}

            {isLoading && (
              <div className="flex justify-start">
                <div className="bg-gray-100 rounded-lg px-4 py-2">
                  <div className="flex space-x-2">
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0.1s' }}></div>
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0.2s' }}></div>
                  </div>
                </div>
              </div>
            )}
            <div ref={messagesEndRef} />
          </div>

          {/* Input form */}
          <form onSubmit={handleSubmit} className="p-4 border-t border-gray-200">
            <div className="flex space-x-2">
              <input
                type="text"
                value={input}
                onChange={handleInputChange}
                placeholder={inputPlaceholder}
                className="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2"
                disabled={isLoading}
              />
              <button
                type="submit"
                disabled={isLoading || !input.trim()}
                className="px-4 py-2 text-white rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                style={{ backgroundColor: accentColor }}
              >
                {sendButtonText}
              </button>
            </div>
          </form>
        </div>
      )}
    </>
  );
}
```

### Configure environment variables

Add your assistant API token to your environment variables:

```bash .env
REACT_APP_MINTLIFY_TOKEN=mint_dsc_your_token_here
```

<Note>
  The environment variable name depends on your framework. Common formats include:
  - Create React App: `REACT_APP_MINTLIFY_TOKEN`
  - Next.js: `NEXT_PUBLIC_MINTLIFY_TOKEN`
  - Vite: `VITE_MINTLIFY_TOKEN`
</Note>

### Add the widget to your app

Import and render the assistant widget in your application. Pass your Mintlify project ID.

```jsx App.jsx
import { AssistantWidget } from './components/AssistantWidget';

function App() {
  return (
    <div>
      {/* Your existing app content */}

      {/* Add the assistant widget - use your project ID */}
      <AssistantWidget project="yourcompany" />
    </div>
  );
}

export default App;
```

## Test the widget

1. Start your development server:
   ```bash
   npm start
   ```
2. Open your application in a browser.
3. Click the assistant button in the bottom-right corner.
4. Ask a question that requires searching your documentation, such as "How do I get started?"

### Verify the assistant

Check the following to confirm the widget is working:

- **Panel opens and closes** - The chat panel appears when you click the toggle button and closes when you click it again or press Escape
- **User messages display** - Your questions appear in the chat as user messages
- **Assistant responds** - The assistant responds with relevant information from your documentation
- **Source citations appear** - Sources are displayed below the response with clickable links
- **Conversation context persists** - Follow-up questions maintain the conversation history (thread ID is preserved across messages)
- **Browser console check** - Open developer tools and verify:
  - No authentication errors (look for 401 or 403 in Network tab)
  - The `x-thread-id` header is present in API responses
  - No CORS errors if embedding on a different domain

### Common test issues

If the widget doesn't work as expected:

- **No responses** - Check that your project ID is correct and your Mintlify plan includes the assistant feature
- **Authentication fails** - Verify the `mint_dsc_` token is correctly set in environment variables and restart your dev server
- **Messages don't show sources** - Ensure `sendExtraMessageFields: true` is set in the useChat configuration
- **Context not maintained** - Verify the `threadId` is being extracted from response headers and passed to subsequent requests

## Optional enhancements

### Filter by documentation section

Limit the assistant's responses to specific sections of your documentation by adding a `filter` parameter to the request body:

```jsx
body: {
  fp: userId,
  threadId: threadId,
  filter: {
    path: '/api-reference' // Only search the API reference section
  }
},
```

### Track user sessions

The `fp` (fingerprint) parameter is already included in the component to track user sessions. You can pass a unique user identifier to provide personalized assistance and analytics:

```jsx
<AssistantWidget
  project="yourcompany"
  userId={currentUser.id} // Pass authenticated user ID
/>
```

### Customize styling

The component accepts several props to match your brand colors and text. You can customize the appearance without modifying the component code.

#### Change brand colors

Pass hex color codes to customize the button and accent colors:

```jsx
<AssistantWidget
  project="yourcompany"
  buttonColor="#dc2626" // Red button
  accentColor="#dc2626" // Red message bubbles
/>
```

#### Customize text and labels

Replace default text with your own:

```jsx
<AssistantWidget
  project="yourcompany"
  headerTitle="Help & Support"
  headerSubtitle="Get instant answers from our docs"
  emptyStateText="Ask me anything!"
  inputPlaceholder="What would you like to know?"
  sendButtonText="Ask"
/>
```

#### Change widget position

Position the widget in any corner of the screen:

```jsx
<AssistantWidget
  project="yourcompany"
  position="bottom-left" // Options: 'bottom-right', 'bottom-left', 'top-right', 'top-left'
/>
```

#### Advanced styling with CSS

For more control, modify the Tailwind classes directly in the component. The component uses inline styles for colors, so you can also override specific elements with CSS modules or styled-components if needed.

## Props reference

The `AssistantWidget` component accepts the following props:

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `project` | string | required | Your Mintlify project ID from the dashboard |
| `userId` | string | `'anonymous'` | Unique identifier for tracking user sessions |
| `buttonColor` | string | `'#2563eb'` | Hex color code for the toggle button and accents |
| `accentColor` | string | `'#2563eb'` | Hex color code for user message bubbles and interactive elements |
| `position` | string | `'bottom-right'` | Widget position: `'bottom-right'`, `'bottom-left'`, `'top-right'`, or `'top-left'` |
| `headerTitle` | string | `'Documentation Assistant'` | Title displayed in the chat panel header |
| `headerSubtitle` | string | `'Ask me anything about our docs'` | Subtitle shown below the title |
| `emptyStateText` | string | `'How can I help you today?'` | Message shown when no conversation history exists |
| `inputPlaceholder` | string | `'Ask a question...'` | Placeholder text for the message input field |
| `sendButtonText` | string | `'Send'` | Label for the send button |

## Integrate with your design system

To match your application's existing brand, you can pass theme values from your design system or theme provider:

```jsx
// Using a theme context
import { useTheme } from './context/ThemeContext';
import { AssistantWidget } from './components/AssistantWidget';

function App() {
  const { colors } = useTheme();

  return (
    <div>
      {/* Your app content */}
      <AssistantWidget
        project="yourcompany"
        buttonColor={colors.primary}
        accentColor={colors.primary}
        headerTitle={`Help with ${APP_NAME}`}
      />
    </div>
  );
}
```

Or with Tailwind config:

```jsx
// Extract colors from Tailwind theme
import { AssistantWidget } from './components/AssistantWidget';

export default function App() {
  const brandColor = '#3b82f6'; // From your Tailwind config

  return (
    <AssistantWidget
      project="yourcompany"
      buttonColor={brandColor}
      accentColor={brandColor}
    />
  );
}
```

## Troubleshooting

### Widget not appearing

- Verify the component is imported and rendered in your app.
- Check that Tailwind CSS or your styling solution is properly configured.
- Ensure the z-index values do not conflict with other fixed elements.

### 401 authentication error

- Verify your API token starts with `mint_dsc_`.
- Check the token is correctly set in your environment variables.
- Confirm you are using the public assistant API token, not the admin API key.
- Restart your development server after adding environment variables.

### No responses from assistant

- Verify your project ID is correct (find it in your dashboard).
- Check that your Mintlify plan includes the assistant feature.
- Confirm your documentation site is published and accessible.

### Thread context not maintained

- Verify the `threadId` is being extracted from the `x-thread-id` response header.
- Check that the custom `fetch` function is implemented correctly.
- Ensure the `threadId` state persists between messages.
- Confirm `streamProtocol: 'data'` is set in the useChat configuration.
