---
title: "Tutorial: Build an in-app documentation assistant"
sidebarTitle: "Build an in-app assistant"
description: "Embed the assistant in your application to answer questions with information from your documentation"
---

## What you will build

A reusable React component that embeds the Mintlify assistant directly in your application. The component provides:

- A toggle button that opens a chat panel
- Real-time streaming responses based on information from your documentation
- Source citations that link to your documentation

Users can get help with your product without leaving your application.

## Prerequisites

- Mintlify Pro or Custom plan
- Your Mintlify project ID (found in your [dashboard](https://dashboard.mintlify.com))
- An assistant API key
- Node.js and npm installed
- Basic React knowledge
- Existing React application (Next.js, Vite, Create React App, etc.)

### Get your assistant API key

1. Navigate to the [API keys](https://dashboard.mintlify.com/settings/organization/api-keys) page in your dashboard.
2. Select **Create Assistant API Key**.
3. Copy the assistant API key (starts with `mint_dsc_`) and save it securely.

<Note>
  The assistant API key is a public token that can be used in frontend code. Calls using this token count toward your plan's message allowance and can incur overages.
</Note>

## Build the widget

### Install dependencies

Install the AI SDK for React and a Markdown renderer:

```bash
npm install ai @ai-sdk/react react-markdown
```

### Create the assistant component

Create a new file `AssistantWidget.jsx` (or `.tsx` if using TypeScript) in your components directory:

```jsx AssistantWidget.jsx expandable
import { useChat } from '@ai-sdk/react';
import { useState, useRef, useEffect, useCallback } from 'react';
import ReactMarkdown from 'react-markdown';

// Helper function to extract sources from message parts
const extractSources = (parts, domain) => {
  if (!parts) return [];
  
  return parts
    .filter(part =>
      part.type === 'tool-invocation' &&
      part.toolInvocation?.state === 'result' &&
      part.toolInvocation?.toolName === 'search' &&
      Array.isArray(part.toolInvocation?.result)
    )
    .flatMap(part => part.toolInvocation.result)
    .map(source => ({
      url: source.url || `https://${domain}.mintlify.app/${source.path}`,
      title: source.metadata?.title || source.path,
    }));
};

export function AssistantWidget({
  domain,
  userId = 'anonymous',
  buttonColor = '#2563eb',
  accentColor = '#2563eb',
  position = 'bottom-right',
  headerTitle = 'Documentation assistant',
  headerSubtitle = 'Ask me anything about our docs',
  emptyStateText = 'How can I help you today?',
  inputPlaceholder = 'Ask a question...',
  sendButtonText = 'Send',
  persistThread = true, // Persist thread ID to localStorage
}) {
  const [isOpen, setIsOpen] = useState(false);
  const [threadId, setThreadId] = useState(() => {
    // Restore thread from localStorage if enabled
    if (persistThread && typeof window !== 'undefined') {
      return localStorage.getItem(`mintlify-thread-${domain}`) || null;
    }
    return null;
  });
  const messagesEndRef = useRef(null);
  const inputRef = useRef(null);
  const chatPanelRef = useRef(null);

  const { messages, input, handleInputChange, handleSubmit, isLoading, error } = useChat({
    api: `https://api-dsc.mintlify.com/v1/assistant/${domain}/message`,
    headers: {
      'Authorization': `Bearer ${process.env.REACT_APP_MINTLIFY_TOKEN}`,
    },
    body: {
      fp: userId,
      threadId: threadId,
      retrievalPageSize: 5,
      filter: null,
    },
    fetch: async (url, options) => {
      const response = await fetch(url, options);
      const tempThreadId = response.headers.get('x-thread-id');
      if (tempThreadId && tempThreadId !== threadId) {
        setThreadId(tempThreadId);
        // Persist thread ID if enabled
        if (persistThread && typeof window !== 'undefined') {
          localStorage.setItem(`mintlify-thread-${domain}`, tempThreadId);
        }
      }
      return response;
    },
    streamProtocol: 'data',
    sendExtraMessageFields: true,
    onError: (err) => {
      console.error('Chat error:', err);
    },
  });

  // Scroll to latest message
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [messages]);

  // Handle keyboard shortcuts and focus trap
  useEffect(() => {
    const handleKeyDown = (e) => {
      // Close on Escape
      if (e.key === 'Escape' && isOpen) {
        setIsOpen(false);
        return;
      }
      
      // Focus trap - keep Tab navigation within modal
      if (e.key === 'Tab' && isOpen && chatPanelRef.current) {
        const focusableElements = chatPanelRef.current.querySelectorAll(
          'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        const firstElement = focusableElements[0];
        const lastElement = focusableElements[focusableElements.length - 1];

        if (e.shiftKey && document.activeElement === firstElement) {
          lastElement?.focus();
          e.preventDefault();
        } else if (!e.shiftKey && document.activeElement === lastElement) {
          firstElement?.focus();
          e.preventDefault();
        }
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleKeyDown);
      return () => document.removeEventListener('keydown', handleKeyDown);
    }
  }, [isOpen]);

  // Focus input when chat opens
  useEffect(() => {
    if (isOpen && inputRef.current) {
      setTimeout(() => inputRef.current?.focus(), 100);
    }
  }, [isOpen]);

  const getPositionClasses = () => {
    const positions = {
      'bottom-right': 'bottom-4 right-4',
      'bottom-left': 'bottom-4 left-4',
      'top-right': 'top-4 right-4',
      'top-left': 'top-4 left-4',
    };
    return positions[position] || positions['bottom-right'];
  };

  const panelPosition = {
    'bottom-right': 'bottom-20 right-4',
    'bottom-left': 'bottom-20 left-4',
    'top-right': 'top-20 right-4',
    'top-left': 'top-20 left-4',
  };

  const clearConversation = useCallback(() => {
    if (window.confirm('Clear this conversation? This cannot be undone.')) {
      setThreadId(null);
      if (persistThread && typeof window !== 'undefined') {
        localStorage.removeItem(`mintlify-thread-${domain}`);
      }
      window.location.reload(); // Simple way to reset chat state
    }
  }, [domain, persistThread]);

  return (
    <>
      {/* Toggle button */}
      <button
        onClick={() => setIsOpen(!isOpen)}
        className={`fixed ${getPositionClasses()} text-white rounded-full p-4 shadow-lg hover:shadow-xl transition-all z-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-opacity-50`}
        style={{ 
          backgroundColor: buttonColor,
          '--tw-ring-color': buttonColor,
        }}
        aria-label={isOpen ? 'Close documentation assistant' : 'Open documentation assistant'}
        aria-expanded={isOpen}
      >
        {isOpen ? (
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
          </svg>
        ) : (
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        )}
      </button>

      {/* Chat panel */}
      {isOpen && (
        <div
          ref={chatPanelRef}
          className={`fixed ${panelPosition[position]} w-[calc(100vw-2rem)] sm:w-96 h-[85vh] sm:h-[600px] bg-white rounded-lg shadow-2xl flex flex-col z-50 border border-gray-200`}
          role="dialog"
          aria-label="Documentation assistant chat"
          aria-modal="true"
        >
          {/* Header */}
          <div className="p-4 border-b border-gray-200 bg-gray-50 rounded-t-lg flex items-center justify-between shrink-0">
            <div className="flex-1 min-w-0">
              <h3 className="font-semibold text-gray-900 truncate">{headerTitle}</h3>
              <p className="text-sm text-gray-600 truncate">{headerSubtitle}</p>
            </div>
            <div className="flex items-center ml-2 gap-1">
              {messages.length > 0 && (
                <button
                  onClick={clearConversation}
                  className="p-2 text-gray-500 hover:text-gray-700 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400"
                  aria-label="Clear conversation"
                  title="Clear conversation"
                >
                  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                  </svg>
                </button>
              )}
              <button
                onClick={() => setIsOpen(false)}
                className="p-2 text-gray-500 hover:text-gray-700 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400"
                aria-label="Close chat panel"
              >
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
          </div>

          {/* Error banner */}
          {error && (
            <div className="bg-red-50 border-b border-red-200 p-3 flex items-start gap-2 shrink-0">
              <svg className="w-5 h-5 text-red-600 shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clipRule="evenodd" />
              </svg>
              <div className="flex-1 min-w-0">
                <p className="text-sm text-red-800 font-medium">Something went wrong</p>
                <p className="text-xs text-red-700 mt-0.5">{error.message || 'Please try again'}</p>
              </div>
            </div>
          )}

          {/* Messages */}
          <div className="flex-1 overflow-y-auto p-4 space-y-4 min-h-0" role="log" aria-live="polite" aria-atomic="false">
            {messages.length === 0 && !isLoading && (
              <div className="text-center text-gray-500 mt-8">
                <div className="inline-flex items-center justify-center w-12 h-12 bg-gray-100 rounded-full mb-3">
                  <svg className="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
                <p className="font-medium">{emptyStateText}</p>
              </div>
            )}

            {messages.map((message) => {
              const sources = message.role === 'assistant' ? extractSources(message.parts, domain) : [];
              
              return (
                <div
                  key={message.id}
                  className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}
                >
                  <div
                    className={`max-w-[85%] rounded-lg px-4 py-2 ${
                      message.role === 'user'
                        ? 'text-white shadow-sm'
                        : 'bg-gray-100 text-gray-900'
                    }`}
                    style={message.role === 'user' ? { backgroundColor: accentColor } : {}}
                  >
                    {message.role === 'user' ? (
                      <div className="whitespace-pre-wrap break-words">
                        {message.content}
                      </div>
                    ) : (
                      <ReactMarkdown
                        className="prose prose-sm max-w-none prose-p:my-2 prose-ul:my-2 prose-ol:my-2 prose-li:my-1 prose-code:bg-gray-200 prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-code:text-sm prose-pre:bg-gray-800 prose-pre:text-white prose-pre:p-3 prose-pre:rounded prose-a:text-blue-600 hover:prose-a:text-blue-800"
                        components={{
                          p: ({ children }) => <p className="mb-2 last:mb-0">{children}</p>,
                          ul: ({ children }) => <ul className="mb-2 last:mb-0 ml-4 list-disc">{children}</ul>,
                          ol: ({ children }) => <ol className="mb-2 last:mb-0 ml-4 list-decimal">{children}</ol>,
                          li: ({ children }) => <li className="mb-1">{children}</li>,
                          code: ({ inline, children }) =>
                            inline ? (
                              <code className="bg-gray-200 px-1.5 py-0.5 rounded text-sm font-mono">{children}</code>
                            ) : (
                              <code className="block bg-gray-800 text-white p-3 rounded text-sm overflow-x-auto font-mono">{children}</code>
                            ),
                          a: ({ href, children }) => (
                            <a href={href} target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:text-blue-800 underline">
                              {children}
                            </a>
                          ),
                        }}
                      >
                        {message.content ||
                          message.parts
                            ?.filter(p => p.type === 'text')
                            .map(p => p.text)
                            .join('') || ''}
                      </ReactMarkdown>
                    )}

                    {/* Display sources */}
                    {sources.length > 0 && (
                      <div className="mt-3 pt-3 border-t border-gray-300">
                        <p className="text-xs font-semibold mb-2 text-gray-700">Sources:</p>
                        <ul className="text-xs space-y-1.5">
                          {sources.map((source, idx) => (
                            <li key={idx} className="flex items-start gap-1.5">
                              <svg className="w-3 h-3 text-gray-500 shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z" />
                                <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z" />
                              </svg>
                              <a
                                href={source.url}
                                target="_blank"
                                rel="noopener noreferrer"
                                className="text-blue-600 hover:text-blue-800 underline hover:no-underline break-words"
                              >
                                {source.title}
                              </a>
                            </li>
                          ))}
                        </ul>
                      </div>
                    )}
                  </div>
                </div>
              );
            })}

            {isLoading && (
              <div className="flex justify-start">
                <div className="bg-gray-100 rounded-lg px-4 py-3">
                  <div className="flex space-x-2">
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0.1s' }}></div>
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0.2s' }}></div>
                  </div>
                </div>
              </div>
            )}
            <div ref={messagesEndRef} />
          </div>

          {/* Input form */}
          <form onSubmit={handleSubmit} className="p-4 border-t border-gray-200 bg-white rounded-b-lg shrink-0">
            <div className="flex gap-2">
              <input
                ref={inputRef}
                type="text"
                value={input}
                onChange={handleInputChange}
                placeholder={inputPlaceholder}
                className="flex-1 px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-0 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"
                style={{ '--tw-ring-color': accentColor }}
                disabled={isLoading}
                aria-label="Message input"
              />
              <button
                type="submit"
                disabled={isLoading || !input.trim()}
                className="px-6 py-2.5 text-white rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-medium shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-offset-2"
                style={{ 
                  backgroundColor: accentColor,
                  '--tw-ring-color': accentColor,
                }}
                aria-label={sendButtonText}
              >
                {isLoading ? (
                  <svg className="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24">
                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" />
                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
                  </svg>
                ) : (
                  sendButtonText
                )}
              </button>
            </div>
          </form>
        </div>
      )}
    </>
  );
}
```

### Configure environment variables

Add your assistant API token to your `.env` file in your project root:

```bash .env
REACT_APP_MINTLIFY_TOKEN=mint_dsc_your_token_here
```

<Note>
  Create React App requires environment variables to be prefixed with `REACT_APP_`. Make sure to restart your development server after adding the variable.
</Note>

### Add the widget to your app

Import and render the assistant widget in your application. Pass your Mintlify project domain (the subdomain from your documentation URL, e.g., "yourcompany" from "yourcompany.mintlify.app").

```jsx App.jsx
import { AssistantWidget } from './components/AssistantWidget';

function App() {
  return (
    <div>
      {/* Your existing app content */}

      {/* Add the assistant widget. Use your project domain */}
      <AssistantWidget domain="yourcompany" />
    </div>
  );
}

export default App;
```

## Test the widget

1. Start your development server:
   ```bash
   npm start
   ```
2. Open your application in a browser.
3. Click the assistant button in the bottom-right corner.
4. Ask a question that requires searching your documentation, such as "How do I get started?"

### Verify the assistant

Check the following to confirm the widget is working:

- **Panel opens and closes**: The chat panel appears when you click the toggle button and closes when you click it again or press Escape
- **User messages display**: Your questions appear in the chat as user messages
- **Assistant responds**: The assistant responds with relevant information from your documentation
- **Source citations appear**: Sources are displayed below the response
- **Conversation context persists**: Follow-up questions maintain the conversation history
- **Browser console**: Open developer tools and verify:
  - No authentication errors (look for 401 or 403 in Network tab)
  - The `x-thread-id` header is present in API responses

If the widget doesn't work as expected:

- **No responses**: Check that your project ID is correct and your Mintlify plan includes the assistant feature.
- **Authentication fails**: Verify the `mint_dsc_` key is correctly set in environment variables and restart your dev server.
- **Messages don't show sources**: Ensure `sendExtraMessageFields: true` is set in the useChat configuration.
- **Context not maintained**: Verify the `threadId` is being extracted from response headers and passed to subsequent requests.

## Optional enhancements

### Filter by documentation section

Limit the assistant's responses to specific sections of your documentation by adding a `filter` parameter to the request body:

```jsx
body: {
  fp: userId,
  threadId: threadId,
  filter: {
    path: '/api-reference' // Only search the API reference section
  }
},
```

### Track user sessions

The `fp` (fingerprint) parameter is already included in the component to track user sessions. You can pass a unique user identifier to provide personalized assistance and analytics:

```jsx
<AssistantWidget
  project="yourcompany"
  userId={currentUser.id} // Pass authenticated user ID
/>
```

### Customize styling

The component accepts several props to customize the appearance.

#### Change colors

Pass hex color codes to customize the button and accent colors:

```jsx
<AssistantWidget
  domain="yourcompany"
  buttonColor="#dc2626" // Red button
  accentColor="#dc2626" // Red message bubbles
/>
```

#### Customize text and labels

Replace default text with your own:

```jsx
<AssistantWidget
  domain="yourcompany"
  headerTitle="Help & Support"
  headerSubtitle="Get instant answers from our docs"
  emptyStateText="Ask me anything!"
  inputPlaceholder="What would you like to know?"
  sendButtonText="Ask"
/>
```

#### Change widget position

Position the widget in any corner of the screen:

```jsx
<AssistantWidget
  domain="yourcompany"
  position="bottom-left" // Options: 'bottom-right', 'bottom-left', 'top-right', 'top-left'
/>
```

#### Advanced styling with CSS

For more control, modify the Tailwind classes directly in the component. The component uses inline styles for colors, so you can also override specific elements with CSS modules or styled-components if needed.

## Props reference

The `AssistantWidget` component accepts the following props:

<ParamField body="domain" type="string" required>
  Your Mintlify project domain (subdomain from your documentation site URL)
</ParamField>

<ParamField body="userId" type="string" default="'anonymous'">
  Unique identifier for tracking user sessions
</ParamField>

<ParamField body="buttonColor" type="string" default="'#2563eb'">
  Hex color code for the toggle button and accents
</ParamField>

<ParamField body="accentColor" type="string" default="'#2563eb'">
  Hex color code for user message bubbles and interactive elements
</ParamField>

<ParamField body="position" type="string" default="'bottom-right'">
  Widget position: `'bottom-right'`, `'bottom-left'`, `'top-right'`, or `'top-left'`
</ParamField>

<ParamField body="headerTitle" type="string" default="'Documentation Assistant'">
  Title displayed in the chat panel header
</ParamField>

<ParamField body="headerSubtitle" type="string" default="'Ask me anything about our docs'">
  Subtitle shown below the title
</ParamField>

<ParamField body="emptyStateText" type="string" default="'How can I help you today?'">
  Message shown when no conversation history exists
</ParamField>

<ParamField body="inputPlaceholder" type="string" default="'Ask a question...'">
  Placeholder text for the message input field
</ParamField>

<ParamField body="sendButtonText" type="string" default="'Send'">
  Label for the send button
</ParamField>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Widget not appearing">
    - Verify the component is imported and rendered in your app.
    - Check that Tailwind CSS or your styling solution is properly configured.
    - Ensure the z-index values do not conflict with other fixed elements.
  </Accordion>

  <Accordion title="401 authentication error">
    - Verify your API token starts with `mint_dsc_`.
    - Check the token is correctly set in your environment variables.
    - Confirm you are using the public assistant API token, not the admin API key.
    - Restart your development server after adding environment variables.
  </Accordion>

  <Accordion title="No responses from assistant">
    - Verify your project ID is correct (find it in your dashboard).
    - Check that your Mintlify plan includes the assistant feature.
    - Confirm your documentation site is published and accessible.
  </Accordion>

  <Accordion title="Thread context not maintained">
    - Verify the `threadId` is being extracted from the `x-thread-id` response header.
    - Check that the custom `fetch` function is implemented correctly.
    - Ensure the `threadId` state persists between messages.
    - Confirm `streamProtocol: 'data'` is set in the useChat configuration.
  </Accordion>
</AccordionGroup>
