---
title: "Tutorial: Build an in-app documentation assistant"
sidebarTitle: "Build an in-app assistant"
description: "Embed the assistant in your application to provide contextual documentation help"
---

## What you will build

A reusable React component that embeds the Mintlify assistant directly in your application. The component provides:

- A toggle button that opens a chat panel
- Real-time streaming responses from your documentation
- Conversation history with thread management
- Source citations that link to your documentation
- Copyable code examples from responses

This allows users to get help with your product without leaving your application.

## Prerequisites

- Mintlify Pro or Custom plan
- Your documentation domain (for example, `docs.yourcompany.com`)
- Node.js and npm installed
- Basic React knowledge
- Existing React application (Next.js, Vite, Create React App, etc.)

### Get your assistant API token

1. Navigate to the [API keys](https://dashboard.mintlify.com/settings/organization/api-keys) page in your dashboard.
2. Select **Create Assistant API Key**.
3. Copy the public token (starts with `mint_dsc_`) and save it.

<Note>
  The assistant API token is a public token that can be used in frontend code. Calls using this token count toward your plan's message allowance and can incur overages.
</Note>

## Build the widget

### Install dependencies

Install the AI SDK for React and Mintlify's assistant integration:

```bash
npm install ai @ai-sdk/react
```

### Create the assistant component

Create a new file `AssistantWidget.jsx` (or `.tsx` if using TypeScript) in your components directory:

```jsx AssistantWidget.jsx expandable
import { useChat } from '@ai-sdk/react';
import { useState } from 'react';

export function AssistantWidget({ domain, userId = 'anonymous' }) {
  const [isOpen, setIsOpen] = useState(false);
  const [threadId, setThreadId] = useState(null);

  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: `https://api.mintlify.com/v1/assistant/${domain}/message`,
    headers: {
      'Authorization': `Bearer ${process.env.REACT_APP_MINTLIFY_TOKEN}`,
    },
    body: {
      fp: userId,
      threadId: threadId,
    },
    fetch: async (url, options) => {
      const response = await fetch(url, options);
      const tempThreadId = response.headers.get('x-thread-id');
      if (tempThreadId) {
        setThreadId(tempThreadId);
      }
      return response;
    },
    streamProtocol: 'data',
    sendExtraMessageFields: true,
  });

  return (
    <>
      {/* Toggle button */}
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="fixed bottom-4 right-4 bg-blue-600 text-white rounded-full p-4 shadow-lg hover:bg-blue-700 transition-colors z-50"
        aria-label="Toggle documentation assistant"
      >
        {isOpen ? (
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
          </svg>
        ) : (
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        )}
      </button>

      {/* Chat panel */}
      {isOpen && (
        <div className="fixed bottom-20 right-4 w-96 h-[600px] bg-white rounded-lg shadow-2xl flex flex-col z-50 border border-gray-200">
          {/* Header */}
          <div className="p-4 border-b border-gray-200 bg-gray-50 rounded-t-lg">
            <h3 className="font-semibold text-gray-900">Documentation Assistant</h3>
            <p className="text-sm text-gray-600">Ask me anything about our docs</p>
          </div>

          {/* Messages */}
          <div className="flex-1 overflow-y-auto p-4 space-y-4">
            {messages.length === 0 && (
              <div className="text-center text-gray-500 mt-8">
                <p>How can I help you today?</p>
              </div>
            )}

            {messages.map((message) => (
              <div
                key={message.id}
                className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}
              >
                <div
                  className={`max-w-[80%] rounded-lg px-4 py-2 ${
                    message.role === 'user'
                      ? 'bg-blue-600 text-white'
                      : 'bg-gray-100 text-gray-900'
                  }`}
                >
                  <div className="prose prose-sm max-w-none whitespace-pre-wrap">
                    {message.content}
                  </div>

                  {/* Display sources from tool invocation results */}
                  {message.role === 'assistant' && message.parts && (
                    (() => {
                      const sources = message.parts
                        .filter(part =>
                          part.type === 'tool-invocation' &&
                          part.toolInvocation?.state === 'result' &&
                          part.toolInvocation?.toolName === 'search' &&
                          Array.isArray(part.toolInvocation?.result)
                        )
                        .flatMap(part => part.toolInvocation.result);

                      return sources.length > 0 ? (
                        <div className="mt-2 pt-2 border-t border-gray-300">
                          <p className="text-xs font-semibold mb-1">Sources:</p>
                          <ul className="text-xs space-y-1">
                            {sources.map((source, idx) => (
                              <li key={idx}>
                                <a
                                  href={`https://${domain}/${source.path}`}
                                  target="_blank"
                                  rel="noopener noreferrer"
                                  className="underline hover:no-underline"
                                >
                                  {source.metadata?.title || source.path}
                                </a>
                              </li>
                            ))}
                          </ul>
                        </div>
                      ) : null;
                    })()
                  )}
                </div>
              </div>
            ))}

            {isLoading && (
              <div className="flex justify-start">
                <div className="bg-gray-100 rounded-lg px-4 py-2">
                  <div className="flex space-x-2">
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-100"></div>
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-200"></div>
                  </div>
                </div>
              </div>
            )}
          </div>

          {/* Input form */}
          <form onSubmit={handleSubmit} className="p-4 border-t border-gray-200">
            <div className="flex space-x-2">
              <input
                type="text"
                value={input}
                onChange={handleInputChange}
                placeholder="Ask a question..."
                className="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                disabled={isLoading}
              />
              <button
                type="submit"
                disabled={isLoading || !input.trim()}
                className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
              >
                Send
              </button>
            </div>
          </form>
        </div>
      )}
    </>
  );
}
```

### Configure environment variables

Add your assistant API token to your environment variables:

```bash .env
REACT_APP_MINTLIFY_TOKEN=mint_dsc_your_token_here
```

<Note>
  The environment variable name depends on your framework. Common formats include:
  - Create React App: `REACT_APP_MINTLIFY_TOKEN`
  - Next.js: `NEXT_PUBLIC_MINTLIFY_TOKEN`
  - Vite: `VITE_MINTLIFY_TOKEN`
</Note>

### Add the widget to your app

Import and render the assistant widget in your application. Replace `docs.yourcompany.com` with your documentation domain.

```jsx App.jsx
import { AssistantWidget } from './components/AssistantWidget';

function App() {
  return (
    <div>
      {/* Your existing app content */}

      {/* Add the assistant widget */}
      <AssistantWidget domain="docs.yourcompany.com" />
    </div>
  );
}

export default App;
```

## Test the widget

1. Start your development server:
   ```bash
   npm start
   ```
2. Open your application in a browser.
3. Click the assistant button in the bottom-right corner.
4. Ask a question that requires searching your documentation, such as "How do I get started?"

### Verify the assistant

Check the following to confirm the widget is working:

- The chat panel opens when you click the toggle button.
- Your question appears in the chat as a user message.
- The assistant responds with relevant information from your documentation.
- Source links appear below the response and navigate to your docs when clicked.
- Follow-up questions maintain the conversation context.

## Optional enhancements

### Filter by documentation section

Limit the assistant's responses to specific sections of your documentation by adding a `filter` parameter to the request body:

```jsx
body: {
  fp: userId,
  threadId: threadId,
  filter: {
    path: '/api-reference' // Only search the API reference section
  }
},
```

### Track user sessions

The `fp` (fingerprint) parameter is already included in the component to track user sessions. You can pass a unique user identifier to provide personalized assistance and analytics:

```jsx
<AssistantWidget
  domain="docs.yourcompany.com"
  userId={currentUser.id} // Pass authenticated user ID
/>
```

### Customize styling

The component uses Tailwind CSS classes. Customize the appearance by modifying the class names or replacing them with your own CSS solution.

## Troubleshooting

### Widget not appearing

- Verify the component is imported and rendered in your app.
- Check that Tailwind CSS or your styling solution is properly configured.
- Ensure the z-index values do not conflict with other fixed elements.

### 401 authentication error

- Verify your API token starts with `mint_dsc_`.
- Check the token is correctly set in your environment variables.
- Confirm you are using the public assistant API token, not the admin API key.
- Restart your development server after adding environment variables.

### No responses from assistant

- Verify your documentation domain is correct (do not include `https://`).
- Check that your Mintlify plan includes the assistant feature.
- Confirm your documentation site is published and accessible.

### Thread context not maintained

- Verify the `threadId` is being extracted from the `x-thread-id` response header.
- Check that the custom `fetch` function is implemented correctly.
- Ensure the `threadId` state persists between messages.
- Confirm `streamProtocol: 'data'` is set in the useChat configuration.
