---
title: "Tutorial: Build an in-app documentation assistant"
sidebarTitle: "Build an in-app assistant"
description: "Embed the assistant in your application to answer questions with information from your documentation"
---

## What you will build

A reusable React component that embeds the Mintlify assistant directly in your application. The component provides:

- A toggle button that opens a chat panel
- Real-time streaming responses based on information from your documentation
- Source citations that link to your documentation

Users can get help with your product without leaving your application.

## Prerequisites

- Mintlify Pro or Custom plan
- Your Mintlify project ID (found in your [dashboard](https://dashboard.mintlify.com))
- An assistant API key
- Node.js and npm installed
- Basic React knowledge
- Existing React application (Next.js, Vite, Create React App, etc.)

### Get your assistant API key

1. Navigate to the [API keys](https://dashboard.mintlify.com/settings/organization/api-keys) page in your dashboard.
2. Select **Create Assistant API Key**.
3. Copy the assistant API key (starts with `mint_dsc_`) and save it securely.

<Note>
  The assistant API key is a public token that can be used in frontend code. Calls using this token count toward your plan's message allowance and can incur overages.
</Note>

## Build the widget

### Install dependencies

Install the AI SDK for React and a Markdown renderer:

```bash
npm install ai @ai-sdk/react react-markdown
```

### Create the assistant component

Create a new file `AssistantWidget.jsx` (or `.tsx` if using TypeScript) in your components directory:

```jsx AssistantWidget.jsx expandable
import { useChat } from '@ai-sdk/react';
import { useState, useRef, useEffect } from 'react';
import ReactMarkdown from 'react-markdown';

export function AssistantWidget({ domain }) {
  const [isOpen, setIsOpen] = useState(false);
  const messagesEndRef = useRef(null);
  const inputRef = useRef(null);

  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: `https://api-dsc.mintlify.com/v1/assistant/${domain}/message`,
    headers: {
      'Authorization': `Bearer ${process.env.REACT_APP_MINTLIFY_TOKEN}`,
    },
    body: {
      retrievalPageSize: 5,
    },
    streamProtocol: 'data',
  });

  // Auto-scroll to latest message
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [messages]);

  // Focus input when chat opens
  useEffect(() => {
    if (isOpen && inputRef.current) {
      inputRef.current.focus();
    }
  }, [isOpen]);

  // Close on Escape key
  useEffect(() => {
    const handleKeyDown = (e) => {
      if (e.key === 'Escape' && isOpen) {
        setIsOpen(false);
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleKeyDown);
      return () => document.removeEventListener('keydown', handleKeyDown);
    }
  }, [isOpen]);

  return (
    <>
      {/* Toggle button */}
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="fixed bottom-4 right-4 w-12 h-12 bg-blue-600 text-white rounded-full shadow-lg hover:shadow-xl transition-shadow z-50 flex items-center justify-center"
        aria-label={isOpen ? 'Close assistant' : 'Open assistant'}
        aria-expanded={isOpen}
      >
        {isOpen ? (
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
          </svg>
        ) : (
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        )}
      </button>

      {/* Chat panel */}
      {isOpen && (
        <div className="fixed bottom-20 right-4 w-96 h-[500px] bg-white rounded-lg shadow-2xl flex flex-col z-50 border border-gray-200">
          {/* Header */}
          <div className="p-4 border-b border-gray-200 bg-gray-50 rounded-t-lg flex items-center justify-between shrink-0">
            <div>
              <h3 className="font-semibold text-gray-900">Documentation assistant</h3>
              <p className="text-sm text-gray-600">Ask me anything</p>
            </div>
            <button
              onClick={() => setIsOpen(false)}
              className="p-2 text-gray-500 hover:text-gray-700 rounded"
              aria-label="Close"
            >
              <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>

          {/* Messages */}
          <div className="flex-1 overflow-y-auto p-4 space-y-4">
            {messages.map((message) => (
              <div
                key={message.id}
                className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}
              >
                <div
                  className={`max-w-[75%] rounded-lg px-4 py-2 ${
                    message.role === 'user'
                      ? 'bg-blue-600 text-white'
                      : 'bg-gray-100 text-gray-900'
                  }`}
                >
                  {message.role === 'user' ? (
                    <div className="whitespace-pre-wrap break-words text-sm">
                      {message.content}
                    </div>
                  ) : (
                    <ReactMarkdown className="prose prose-sm max-w-none text-sm">
                      {message.content}
                    </ReactMarkdown>
                  )}
                </div>
              </div>
            ))}

            {isLoading && (
              <div className="flex justify-start">
                <div className="text-gray-500 text-sm">Loading...</div>
              </div>
            )}

            <div ref={messagesEndRef} />
          </div>

          {/* Input form */}
          <form onSubmit={handleSubmit} className="p-4 border-t border-gray-200 bg-white rounded-b-lg shrink-0">
            <div className="flex gap-2">
              <input
                ref={inputRef}
                type="text"
                value={input}
                onChange={handleInputChange}
                placeholder="Ask a question..."
                className="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"
                disabled={isLoading}
              />
              <button
                type="submit"
                disabled={isLoading || !input.trim()}
                className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 text-sm font-medium"
              >
                Send
              </button>
            </div>
          </form>
        </div>
      )}
    </>
  );
}
```

### Configure environment variables

Add your assistant API token to your `.env` file in your project root:

```bash .env
REACT_APP_MINTLIFY_TOKEN=mint_dsc_your_token_here
```

<Note>
  Create React App requires environment variables to be prefixed with `REACT_APP_`. Make sure to restart your development server after adding the variable.
</Note>

### Add the widget to your app

Import and render the component in your application. Pass your Mintlify project domain (the subdomain from your documentation URL, e.g., "yourcompany" from "yourcompany.mintlify.app").

```jsx App.jsx
import { AssistantWidget } from './components/AssistantWidget';

function App() {
  return (
    <div>
      {/* Your existing app content */}
      <AssistantWidget domain="yourcompany" />
    </div>
  );
}

export default App;
```

## Test the widget

1. Start your development server:
   ```bash
   npm start
   ```
2. Open your application in a browser.
3. Click the assistant button in the bottom-right corner.
4. Ask a question that requires searching your documentation, such as "How do I get started?"

### Verify the assistant

Check the following to confirm the widget is working:

- **Panel opens and closes**: The chat panel appears when you click the toggle button and closes when you click it again or press Escape
- **User messages display**: Your questions appear in the chat as user messages
- **Assistant responds**: The assistant responds with relevant information from your documentation
- **Markdown renders**: Markdown formatting (bold, code blocks, links) appears correctly in responses
- **Loading state shows**: You see "Loading..." text while waiting for a response
- **Browser console**: Open developer tools and check the Network tab:
  - No authentication errors (look for 401 or 403 errors)
  - API requests go to `https://api-dsc.mintlify.com/v1/assistant/{domain}/message`

## Customization ideas

This example shows the simplest implementation. Here are common ways to extend it:

### Add color customization

Accept color props and use them for theming:

```jsx
export function AssistantWidget({ domain, buttonColor = '#2563eb' }) {
  // ... rest of component
  return (
    <>
      <button
        style={{ backgroundColor: buttonColor }}
        // ... rest of button
      >
```

### Add widget positioning options

Let users position the widget in different corners:

```jsx
export function AssistantWidget({ domain, position = 'bottom-right' }) {
  const positions = {
    'bottom-right': 'bottom-4 right-4',
    'bottom-left': 'bottom-4 left-4',
    'top-right': 'top-4 right-4',
    'top-left': 'top-4 left-4',
  };

  return (
    <>
      <button className={`fixed ${positions[position]} ...`}
```

### Track user sessions

Add a `userId` prop to identify users in analytics:

```jsx
export function AssistantWidget({ domain, userId = 'anonymous' }) {
  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: `https://api-dsc.mintlify.com/v1/assistant/${domain}/message`,
    body: {
      fp: userId,  // Track which user sent messages
      retrievalPageSize: 5,
    },
    // ... rest of config
  });
```

### Filter by documentation section

Limit responses to a specific section of your docs:

```jsx
const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
  api: `https://api-dsc.mintlify.com/v1/assistant/${domain}/message`,
  body: {
    retrievalPageSize: 5,
    filter: {
      path: '/api-reference' // Only search this section
    }
  },
  // ... rest of config
});
```

### Thread persistence

Store conversation history in localStorage:

```jsx
const [threadId, setThreadId] = useState(() => {
  return localStorage.getItem(`mintlify-thread-${domain}`) || null;
});

const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
  api: `https://api-dsc.mintlify.com/v1/assistant/${domain}/message`,
  body: {
    threadId: threadId,  // Include thread ID
    retrievalPageSize: 5,
  },
  fetch: async (url, options) => {
    const response = await fetch(url, options);
    const newThreadId = response.headers.get('x-thread-id');
    if (newThreadId) {
      setThreadId(newThreadId);
      localStorage.setItem(`mintlify-thread-${domain}`, newThreadId);
    }
    return response;
  },
  // ... rest of config
});
```

### Source citations

Extract and display sources from assistant responses:

```jsx
const extractSources = (parts) => {
  return parts
    ?.filter(p => p.type === 'tool-invocation' && p.toolInvocation?.toolName === 'search')
    .flatMap(p => p.toolInvocation?.result || [])
    .map(source => ({
      url: source.url || source.path,
      title: source.metadata?.title || source.path,
    })) || [];
};

// In your message rendering:
{messages.map((message) => {
  const sources = message.role === 'assistant' ? extractSources(message.parts) : [];
  return (
    <div key={message.id}>
      {/* message content */}
      {sources.length > 0 && (
        <div className="mt-2 text-xs">
          <p className="font-semibold">Sources:</p>
          {sources.map((s, i) => (
            <a key={i} href={s.url} target="_blank" className="text-blue-600">
              {s.title}
            </a>
          ))}
        </div>
      )}
    </div>
  );
})}
```

## Troubleshooting

<AccordionGroup>
  <Accordion title="Widget not appearing">
    - Verify the component is imported and rendered in your app.
    - Check that Tailwind CSS or your styling solution is properly configured.
    - Ensure the z-index values do not conflict with other fixed elements.
  </Accordion>

  <Accordion title="401 authentication error">
    - Verify your API token starts with `mint_dsc_`.
    - Check the token is correctly set in your environment variables.
    - Confirm you are using the public assistant API token, not the admin API key.
    - Restart your development server after adding environment variables.
  </Accordion>

  <Accordion title="No responses from assistant">
    - Verify your project domain is correct (the subdomain from your documentation URL).
    - Check that your Mintlify plan includes the assistant feature.
    - Confirm your documentation site is published and accessible.
    - Verify the assistant API token is correctly set in your environment variables.
  </Accordion>
</AccordionGroup>
