---
title: "Tutorial: Auto-update documentation when code is changed"
sidebarTitle: "Automate documentation updates"
description: "Use the agent API to automatically update your documentation."
keywords: ["agent automation", "n8n", "GitHub Actions", "automatic doc updates"]
---

Automatically update documentation when code is pushed to your main branch using GitHub Actions or n8n. The agent creates pull requests in your documentation repository based on changes in your code repository.

## Choose your platform

<Tabs>
  <Tab title="GitHub Actions">

## Prerequisites

- [Mintlify GitHub App](/deploy/github) installed on code and documentation repositories
- [Mintlify admin API key](https://dashboard.mintlify.com/settings/organization/api-keys)
- [Mintlify project ID](https://dashboard.mintlify.com/settings/organization/api-keys)
- [Mintlify Enterprise plan](https://mintlify.com/pricing)

### Setup

1. Install the Mintlify app on your code repository:
   - Open the agent panel in your dashboard → **Settings** → **Add to New Organization**
   - Select your repositories

2. Get your admin API key:
   - Navigate to [API keys](https://dashboard.mintlify.com/settings/organization/api-keys)
   - Click **Create Admin API Key** and save it

### Create workflow

Create `.github/workflows/update-docs.yml` in your code repository:

    ```yaml
    name: Update Docs

    on:
      push:
        branches:
          - main

    jobs:
      update-docs:
        runs-on: ubuntu-latest
        steps:
          - uses: actions/github-script@v8
            env:
              MINTLIFY_API_KEY: ${{ secrets.MINTLIFY_API_KEY }}
              PROJECT_ID: ${{ secrets.MINTLIFY_PROJECT_ID }}
            with:
              script: |
                const { owner, repo } = context.repo;
                const projectId = process.env.PROJECT_ID;
                const apiKey = process.env.MINTLIFY_API_KEY;

                if (!projectId || !apiKey) {
                  core.setFailed('Missing MINTLIFY_PROJECT_ID or MINTLIFY_API_KEY secrets');
                  return;
                }

                const url = `https://api.mintlify.com/v1/agent/${projectId}/job`;
                const payload = {
                  branch: `mintlify/docs-update-${Date.now()}`,
                  messages: [
                    {
                      role: 'system',
                      content: 'You are an action runner that updates documentation based on code changes. You should never ask questions. If you are not able to access the repository, report the error and exit.'
                    },
                    {
                      role: 'user',
                      content: `Update the documentation for our recent pushes to main:\n\nRepository: ${owner}/${repo}`
                    }
                  ],
                  asDraft: false
                };

                try {
                  const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                      'Authorization': `Bearer ${apiKey}`,
                      'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                  });

                  if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}: ${await response.text()}`);
                  }

                  const reader = response.body.getReader();
                  const decoder = new TextDecoder();
                  let buffer = '';

                  while (true) {
                    const { done, value } = await reader.read();
                    if (done) break;
                    buffer += decoder.decode(value, { stream: true });
                    const lines = buffer.split('\n');
                    buffer = lines.pop() || '';
                    for (const line of lines) {
                      if (line.trim()) {
                        console.log(line);
                      }
                    }
                  }
                  if (buffer.trim()) {
                    console.log(buffer);
                  }

                  core.notice(`Documentation update job triggered for ${owner}/${repo}`);
                } catch (error) {
                  core.setFailed(`Failed to create documentation update job: ${error.message}`);
                }
    ```

### Add secrets

In your code repository: **Settings** → **Secrets and variables** → **Actions** → **New repository secret**

Add:
- `MINTLIFY_API_KEY`: Your admin API key
- `MINTLIFY_PROJECT_ID`: Your project ID from [API keys page](https://dashboard.mintlify.com/settings/organization/api-keys)

### Test

Push to main and check the **Actions** tab. The agent will create a PR in your documentation repository.

### Troubleshooting

**Workflow not running**: Check **Actions** tab for errors. Verify workflow file is in `.github/workflows/` with `.yml` extension.

**401 error**: Verify API key starts with `mint_` and header is `Bearer mint_yourkey`.

**No updates**: Confirm documentation repository is connected to your project and agent has write access.

</Tab>

<Tab title="n8n">

## Prerequisites

- n8n workspace
- [Mintlify Enterprise plan](https://mintlify.com/pricing)
- Mintlify admin API key
- GitHub personal access token with `repo` scope

### Setup

1. Install the Mintlify app on your code repository:
   - Dashboard → Agent panel → **Settings** → **Add to New Organization**
   - Select your repositories

2. Get your admin API key:
   - Navigate to [API keys](https://dashboard.mintlify.com/settings/organization/api-keys)
   - Click **Create Admin API Key**

3. Create a GitHub personal access token:
   - GitHub **Settings** → **Developer settings** → **Personal access tokens** → **Tokens (classic)**
   - Generate with `repo` and `admin:repo_hook` scopes

### Create workflow

1. **Webhook trigger**: Create a webhook node in n8n with path `auto-update-documentation`, copy the production URL

<Frame>
    <img src="/images/guides/n8n/webhook-node.png" alt="Screenshot of the configurations for the webhook node." style={{
      width: 'auto',
      height: '700px',
    }} />
</Frame>

2. **GitHub webhook**: In your code repository → **Settings** → **Webhooks** → **Add webhook**
   - Payload URL: Your n8n webhook URL
   - Content type: `application/json`
   - Events: **Push events** only

3. **Filter node**: Add a code node named "Filter main pushes" (mode: **Run Once for All Items**):

```javascript
const webhookData = $input.first().json.body;

// Only continue if this is a push to main
if (webhookData.ref !== "refs/heads/main") {
  return [];
}

// Extract information
const repository = webhookData.repository;
const pusher = webhookData.pusher;

// Build message for agent
const agentMessage = `Update documentation for changes pushed to main in ${repository.name}. Always edit files and create a pull request.`;

return {
  json: {
    codeRepoName: repository.full_name,
    codeRepoShortName: repository.name,
    agentMessage: agentMessage
  }
};
```

<Frame>
    <img src="/images/guides/n8n/filter-merged-PRs-node.png" alt="Screenshot of the configurations for the filter main pushes node." />
</Frame>

4. **Agent API node**: Add HTTP request node "Create agent job"
   - Method: `POST`
   - URL: `https://api.mintlify.com/v1/agent/YOUR_PROJECT_ID/job`
   - Authentication: Header Auth with `Authorization: Bearer mint_YOUR_API_KEY`
   - Body (JSON):

   ```json
   {
   "branch": "docs-update-from-{{ $json.codeRepoShortName }}-{{ $now.toISOString() }}",
   "messages": [
       {
       "role": "system",
       "content": "{{ $json.agentMessage }}"
       }
   ],
   "asDraft": false
   }
   ```

<Frame>
    <img src="/images/guides/n8n/create-agent-job-node.png" alt="Screenshot of the configurations for the create agent job node." style={{
      width: 'auto',
      height: '700px',
    }} />
</Frame>

5. Save and activate the workflow

<Frame>
    <img src="/images/guides/n8n/workflow.png" alt="Screenshot of the automation workflow in the n8n editor." />
</Frame>

### Test

Push a change to main. Check n8n executions and your documentation repository for a new PR.

### Troubleshooting

**Webhook not triggering**: Verify workflow is active. Check GitHub **Settings** → **Webhooks** → **Recent Deliveries**.

**401 error (agent API)**: Verify API key starts with `mint_` and header is `Bearer mint_yourkey`.

**401 error (GitHub)**: Verify token has `repo` scope and hasn't expired.

</Tab>
</Tabs>
