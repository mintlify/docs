---
openapi: /discovery-openapi.json POST /assistant/{domain}/message
keywords: [ "assistant message", "embed", "chat", "integrate" ]
---

## Integration with `useChat`

The `useChat` hook from Vercel's AI SDK is the recommended way to integrate the assistant API into your application.

Mintlify provides two endpoint versions:
- **v1** (`/discovery/v1/assistant/:domain/message`) - Compatible with AI SDK v4
- **v2** (`/discovery/v2/assistant/:domain/message`) - Native support for AI SDK v5 and later

<Note>
  For AI SDK v5 or later, use the **v2 endpoint** which supports AI SDK v5 natively. The v1 endpoint requires a custom transport for AI SDK v5.
</Note>

<Tabs>
<Tab title="AI SDK v5 (v2 endpoint)">

<Steps>
<Step title="Install AI SDK v5">

```bash
npm i ai@^5.0.0
```

</Step>
<Step title="Use the hook">

```tsx
import { useChat } from 'ai/react';

function MyComponent({ domain }) {
  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: `https://api.mintlify.com/discovery/v2/assistant/${domain}/message`,
    headers: {
      'Authorization': `Bearer ${process.env.PUBLIC_MINTLIFY_ASSISTANT_KEY}`,
    },
    body: {
      fp: 'anonymous',
      retrievalPageSize: 5,
      context: [
        {
          type: 'code',
          value: 'const example = "code snippet";',
          elementId: 'code-block-1',
        },
      ],
    },
    streamProtocol: 'data',
  });

  return (
    <div>
      {messages.map((message) => (
        <div key={message.id}>
          {message.role === 'user' ? 'User: ' : 'Assistant: '}
          {message.content}
        </div>
      ))}
      <form onSubmit={handleSubmit}>
        <input value={input} onChange={handleInputChange} />
        <button type="submit">Send</button>
      </form>
    </div>
  );
}
```

**Required configuration for Mintlify:**
- `streamProtocol: 'data'` - Required for streaming responses.
- `body.fp` - Fingerprint identifier (use 'anonymous' or a user identifier).
- `body.retrievalPageSize` - Number of search results to use (recommended: 5).

**Optional configuration:**
- `body.context` - Array of contextual information to provide to the assistant. Each context object contains:
  - `type` - Either `'code'` or `'textSelection'`.
  - `value` - The code snippet or selected text content.
  - `elementId` (optional) - Identifier for the UI element containing the context.

**Message format:**
The v2 endpoint uses the standard AI SDK v5 message format with `role` and `content` fields:
```typescript
{
  role: 'user' | 'assistant',
  content: string
}
```

</Step>
</Steps>

</Tab>
<Tab title="AI SDK v4 (v1 endpoint)">

<Steps>
<Step title="Install AI SDK v4">

```bash
npm i ai@^4.1.15
```

</Step>
<Step title="Use the hook">

```tsx
import { useChat } from 'ai/react';

function MyComponent({ domain }) {
  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: `https://api.mintlify.com/discovery/v1/assistant/${domain}/message`,
    headers: {
      'Authorization': `Bearer ${process.env.PUBLIC_MINTLIFY_ASSISTANT_KEY}`,
    },
    body: {
      fp: 'anonymous',
      retrievalPageSize: 5,
      context: [
        {
          type: 'code',
          value: 'const example = "code snippet";',
          elementId: 'code-block-1',
        },
      ],
    },
    streamProtocol: 'data',
    sendExtraMessageFields: true,
  });

  return (
    <div>
      {messages.map((message) => (
        <div key={message.id}>
          {message.role === 'user' ? 'User: ' : 'Assistant: '}
          {message.content}
        </div>
      ))}
      <form onSubmit={handleSubmit}>
        <input value={input} onChange={handleInputChange} />
        <button type="submit">Send</button>
      </form>
    </div>
  );
}
```

**Required configuration for Mintlify:**
- `streamProtocol: 'data'` - Required for streaming responses.
- `sendExtraMessageFields: true` - Required to send message metadata.
- `body.fp` - Fingerprint identifier (use 'anonymous' or a user identifier).
- `body.retrievalPageSize` - Number of search results to use (recommended: 5).

**Optional configuration:**
- `body.context` - Array of contextual information to provide to the assistant. Each context object contains:
  - `type` - Either `'code'` or `'textSelection'`.
  - `value` - The code snippet or selected text content.
  - `elementId` (optional) - Identifier for the UI element containing the context.

**Message format:**
The v1 endpoint uses a custom message format with `prompt` and `response` fields:
```typescript
{
  prompt: string,
  response?: string
}
```

</Step>
</Steps>

</Tab>
</Tabs>

See [useChat](https://ai-sdk.dev/docs/reference/ai-sdk-ui/use-chat) in the AI SDK documentation for more details.

## Rate limits

The assistant API has the following limits:

- 10,000 uses per key per month
- 10,000 requests per Mintlify organization per hour
- 10,000 requests per IP per day