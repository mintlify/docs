---
openapi: POST /agent/{projectId}/job
keywords: ["agent job", "create", "automation", "automate"]
---

This endpoint creates an agent job based on provided messages and branch information. The job executes asynchronously and returns a streaming response with the execution details and results.

If a branch doesn't exist, the agent creates one. If files are edited successfully, a pull request is automatically created at the end of the job.

## Request parameters

### `asDraft`

Control whether the pull request is created in draft or non-draft mode.

- **Type**: `boolean`
- **Default**: `true`
- **Description**: When `true`, creates a draft pull request. When `false`, creates a regular (non-draft) pull request ready for review.

Use `asDraft: false` when you want to integrate the agent into automated workflows where pull requests should be immediately ready for review and merging.

## Rate limits

The agent API has the following limits:

- 100 uses per Mintlify project per hour

## Suggested usage

For best results, use the [useChat hook from ai-sdk](https://ai-sdk.dev/docs/reference/ai-sdk-ui/use-chat#usechat) to send requests and handle responses.
