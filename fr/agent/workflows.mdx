---
title: "Workflows"
description: "Automatisez la maintenance de la documentation avec des tâches d'agent planifiées ou déclenchées par événement."
keywords: ["automatisation", "automatiser", "cron", "mise à jour automatique"]
---

<Info>
  Les workflows sont disponibles sur les [plans Enterprise](https://mintlify.com/pricing?ref=agent).

  Vous pouvez avoir jusqu'à 10 workflows actifs.
</Info>

Les workflows exécutent l'agent automatiquement selon un calendrier ou lorsqu'un push est effectué vers un dépôt que vous spécifiez. Chaque workflow définit un prompt pour l'agent et un déclencheur pour indiquer quand l'exécuter.

Lorsqu'un workflow s'exécute, l'agent clone les dépôts spécifiés comme contexte, suit le prompt et ouvre une pull request ou pousse les modifications directement vers votre branche de déploiement.

## Créer un fichier de workflow

Créez des fichiers `.md` dans un répertoire `.mintlify/workflows/` à la racine de votre dépôt de documentation. Chaque fichier définit un workflow.

Les fichiers de workflow utilisent un frontmatter YAML pour configurer le workflow, suivi d'un prompt en Markdown pour l'agent.

```markdown .mintlify/workflows/update-changelog.md
---
name: Update changelog
on:
  cron: "0 9 * * 1"
context:
  - repo: your-org/your-product
automerge: false
---

Review all changes since the last changelog update. Draft a new changelog post with any new features, bug fixes, or breaking changes.

Include information about what a change is and how it affects users.

Do not include any internal-only information or minor changes like bumping package versions or updating documentation.

Success criteria: Someone who reads the changelog knows the most up to date information about the product including what changed and whether or not it affects them.
```

### Champs du frontmatter

| Champ | Requis | Description |
|-------|----------|-------------|
| `name` | Oui | Nom affiché dans le tableau de bord. |
| `on` | Oui | Configuration du déclencheur. |
| `context` | Non | Dépôts clonés comme référence lors de l'exécution du workflow. |
| `automerge` | Non | Par défaut `false`, ce qui ouvre une pull request. Si `true`, pousse les modifications directement vers votre branche de déploiement. |

Vous devez avoir l'application GitHub Mintlify installée sur chaque dépôt listé dans les champs `context` ou `on.push.repo`. Ajoutez de nouveaux dépôts sur la page [application GitHub](https://dashboard.mintlify.com/settings/organization/github-app) de votre tableau de bord Mintlify.

<Frame>
  <img src="/images/github/app-repos-light.png" alt="La page de l'application GitHub montrant les dépôts connectés pour deux organisations." className="block dark:hidden" />
  <img src="/images/github/app-repos-dark.png" alt="La page de l'application GitHub montrant les dépôts connectés pour deux organisations en mode sombre." className="hidden dark:block" />
</Frame>

## Déclencheurs

Chaque workflow doit définir exactement un déclencheur en utilisant le champ `on`.

### Selon un calendrier (cron)

Exécutez un workflow selon un calendrier récurrent en utilisant une expression cron. Tous les calendriers s'exécutent en UTC.

Les workflows sont mis en file d'attente dans les 10 minutes de l'heure planifiée et peuvent prendre jusqu'à 10 minutes pour s'exécuter.

```yaml
on:
  cron: "0 9 * * 1"
```

La valeur est une expression cron standard à 5 champs au format `minute heure jour-du-mois mois jour-de-la-semaine`. Utilisez un outil comme [crontab.guru](https://crontab.guru) pour créer et valider les calendriers.

| Expression | Calendrier |
|------------|----------|
| `"0 9 * * 1"` | Chaque lundi à 9h00 UTC |
| `"0 0 1 * *"` | Premier jour de chaque mois à minuit UTC |
| `"0 8 * * 1-5"` | Jours ouvrables à 8h00 UTC |

### Lors d'une fusion

Exécutez un workflow lorsqu'une pull request est fusionnée vers un dépôt et une branche spécifiques.

```yaml
on:
  push:
    - repo: your-org/your-product
      branch: main
```

- `repo` : Le dépôt GitHub au format `owner/repo`.
- `branch` (optionnel) : La branche à surveiller pour les fusions. Si vous ne spécifiez pas de branche, le workflow se déclenche lors des fusions vers la branche par défaut du dépôt.

Un workflow peut surveiller les fusions dans plusieurs dépôts ou branches.

```yaml
on:
  push:
    - repo: your-org/your-product
    - repo: your-org/another-repo
      branch: release
```

## Dépôts de référence

Utilisez `context` pour donner à l'agent un accès en lecture à des dépôts supplémentaires lors de l'exécution du workflow. Ceci est utile lorsque votre prompt nécessite de réviser du code ou du contenu en dehors de votre dépôt de documentation.

```yaml
context:
  - repo: your-org/your-product
  - repo: your-org/design-system
```

## Fusion automatique des modifications

Par défaut, l'agent ouvre une pull request pour chaque exécution de workflow afin que vous puissiez réviser les modifications avant leur mise en ligne. Définissez `automerge: true` pour pousser les modifications directement vers votre branche de déploiement sans pull request.

```yaml
automerge: true
```

## Prompts

Les prompts efficaces se concentrent sur une tâche et ont un résultat spécifique en tête. Les workflows ont toujours une certaine variance en raison de la nature non déterministe des agents, mais vous pouvez améliorer la cohérence des résultats des workflows en suivant ces bonnes pratiques.

- Décrivez le résultat que vous souhaitez que l'agent atteigne.
- Incluez des critères de réussite.
- Spécifiez le contexte que vous souhaitez que l'agent utilise.
- Divisez les tâches complexes en étapes ou en plusieurs workflows.

## Exemples de workflows

### Audit de style

S'exécute lorsqu'une pull request de documentation est fusionnée pour détecter les violations du guide de style avant qu'elles ne s'accumulent. Ce workflow d'exemple corrige automatiquement les violations du guide de style et liste toute violation nécessitant un jugement humain dans le corps de la PR.

```markdown .mintlify/workflows/style-audit.md
---
name: Style audit
on:
  push:
    - repo: your-org/your-docs
      branch: main
automerge: false
---

Review all MDX files changed in the last merged PR against the style guide at `path/to/style-guide`.

Open a pull request to resolve any style violations that can be fixed automatically. For any edits that require judgment or nuance, note them in the PR body with the specific lines, rule violations, and suggested fixes.

Success criteria:
- All style violations have a proposed resolution.
- No new style violations are introduced.

## Important

- Do not change content meaning. Only correct style violations.
- Skip any files in language subdirectories (`es/`, `fr/`, `zh/`).
```

### Brouillon de documentation pour les nouvelles fonctionnalités

S'exécute lorsque des pull requests sont fusionnées vers votre dépôt produit pour identifier les mises à jour de documentation nécessaires pour toute nouvelle fonctionnalité ou API introduite.

```markdown .mintlify/workflows/draft-feature-docs.md
---
name: Draft docs for new features
on:
  push:
    - repo: your-org/your-product
      branch: main
context:
  - repo: your-org/your-docs
automerge: false
---

Review the diff from the last merged PR in `your-org/your-product`. Identify any new features, APIs, or other changes that require documentation.

For each new addition, draft documentation updates that explain what it does, when to use it, and how to configure it. Include a code example where relevant.

Success criteria: After reading any new or updated documentation, users understand what the feature is, if it applies to tasks they do, and how to use it.

## Important

- Only document changes that affect end users. Skip internal refactors or dependency updates.
- Match the style and structure of existing docs pages.
```

### Mise à jour de la référence API

S'exécute lorsque des pull requests sont fusionnées vers votre dépôt produit pour maintenir les pages de référence API synchronisées avec le code de votre produit. Lorsque les endpoints ou les paramètres changent, ce workflow met à jour le contenu correspondant dans votre documentation.

```markdown .mintlify/workflows/update-api-reference.md
---
name: Update API reference
on:
  push:
    - repo: your-org/your-product
      branch: main
context:
  - repo: your-org/your-docs
automerge: false
---

Review the diff from the last merged PR in `your-org/your-product` for changes to API endpoints, parameters, response shapes, or error codes.

Update the corresponding API specifications or pages in the docs to reflect the changes. Include updated parameter descriptions, type information, and examples where affected.

Success criteria: All API specifications and pages are up to date with the changes in the product repository.

## Important

- If a parameter or endpoint was removed, mark it as deprecated rather than deleting it unless the code explicitly removes it with no deprecation period.
- If no API changes were introduced, do nothing.
```

### Suivi du retard de traduction

S'exécute chaque semaine pour comparer les fichiers source en anglais avec leurs traductions et identifier les pages qui ont pris du retard.

Pour utiliser ce workflow, mettez à jour les sous-répertoires de langue d'exemple (`es/`, `fr/`, `zh/`) avec vos sous-répertoires de langue réels.

```markdown .mintlify/workflows/translation-lag.md
---
name: Track translation lag
on:
  cron: "0 9 * * 3"
---

Compare the English MDX files in the repo against their counterparts in the `es/`, `fr/`, and `zh/` subdirectories. Use git history to identify English files updated more recently than their translations.

Open a pull request that lists pages that are out of sync, organized by language. For each page, include the date of the last English update and a brief summary of what changed so translators have context on what to update.

Success criteria: Any discrepancies between the English and translated files are identified and listed in the pull request.

## Important

- If a translated file does not exist, flag it as missing rather than out of sync.
- Group findings by language, then by how far out of date they are (most stale first).
```

### Audit SEO et métadonnées

S'exécute chaque semaine pour vérifier les pages avec des métadonnées manquantes ou faibles et ouvrir une pull request avec des améliorations. Ce workflow d'exemple vérifie le frontmatter `description` manquant. Modifiez le workflow pour vérifier d'autres métadonnées ou problèmes de contenu que vous priorisez pour votre documentation.

```markdown .mintlify/workflows/seo-audit.md
---
name: SEO and metadata audit
on:
  cron: "0 9 * * 1"
automerge: false
---

Audit all MDX files in the docs for SEO and metadata quality. Check for:

- Missing or empty `description` frontmatter
- Descriptions that are too short (under 50 characters) or too long (over 160 characters)

Open a pull request with improvements for any issues found. Write descriptions that accurately summarize the page content in plain language.

Success criteria: All pages have up to date descriptions that accurately summarize the page content in plain language.

## Important

- Only update frontmatter. Do not change page content.
- If all pages have complete and reasonable metadata, do nothing.
```
