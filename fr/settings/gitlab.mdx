---
title: "GitLab"
description: "Synchronisez votre documentation avec un dépôt GitLab"
icon: "gitlab"
---

Nous utilisons une combinaison de jetons d’accès et de webhooks pour authentifier et synchroniser
les changements entre GitLab et Mintlify.

- Nous utilisons des jetons d’accès pour récupérer des informations depuis GitLab.
- Nous utilisons des webhooks afin que GitLab puisse avertir Mintlify lorsque des changements sont effectués.
  - Cela permet à Mintlify de créer des déploiements de prévisualisation lorsqu’une MR est créée.

## Configurer la connexion

<Steps>
  <Step title="Trouver votre ID de projet">
    Dans votre projet GitLab, accédez à `Settings` > `General` et trouvez l’`ID de projet`.
    <Frame>
      <img src="/images/gitlab/gitlab-project-id.png" />
    </Frame>
  </Step>
  <Step title="Générer un jeton d’accès">
    a. Accédez à `Settings` > `Access Tokens`.

    b. Sélectionnez `Add new token`.
      1. Nommez le jeton « Mintlify ».
      2. Si vous avez un dépôt privé, vous devez définir le rôle sur `Maintainer`.
      3. Choisissez `api` et `read_api` pour les étendues.

    c. Enfin, cliquez sur `Create project access token` et copiez le jeton.

    <Frame>
      <img src="/images/gitlab/gitlab-project-access-token.png" />
    </Frame>

  </Step>
  <Step title="Configurer la connexion">
    Dans le [tableau de bord Mintlify](https://dashboard.mintlify.com/settings/deployment/git-settings), ajoutez l’ID de projet et le jeton d’accès des étapes précédentes avec les autres configurations. Cliquez sur « Save Changes » lorsque vous avez terminé.
    <Frame>
      <img src="/images/gitlab/gitlab-config.png" />
    </Frame>
  </Step>
</Steps>

## Créer le webhook

Les webhooks permettent de recevoir des événements lors de modifications afin de déclencher automatiquement des déploiements.

<Steps>
  <Step title="Accédez à Settings > Webhooks et cliquez sur « Add new Webhook »">
    <Frame>
      <img src="/images/gitlab/gitlab-webhook.png" />
    </Frame>
  </Step>
  <Step title="Configurer l’URL et le webhook">
    Dans le champ « URL », saisissez l’endpoint `https://leaves.mintlify.com/gitlab-webhook` et nommez le webhook « Mintlify ».

  </Step>
  <Step title="Coller le jeton">
    Collez le jeton de webhook généré après la configuration de la connexion.
    <Frame>
      <img src="/images/gitlab/gitlab-show-webtoken.png" />
    </Frame>
  </Step>
  <Step title="Sélectionner les événements">
    Sélectionnez les événements qui doivent déclencher le webhook :
      - Push events (All branches)
      - Merge request events
      
    Une fois terminé, vous devriez obtenir ceci :
    <Frame>
      <img src="/images/gitlab/gitlab-project-webtoken.png" />
    </Frame>
  </Step>
  <Step title="Tester le webhook">
    Après avoir créé le webhook, cliquez sur le menu déroulant « Test » et sélectionnez « Push events » pour envoyer une charge utile d’exemple et vérifier la bonne configuration. Le message « Hook executed successfully: HTTP 200 » s’affichera si tout est correct.

    Cela vous aidera à confirmer que tout fonctionne et que votre documentation se synchronisera correctement avec votre dépôt GitLab.
    <Frame>
      <img src="/images/gitlab/gitlab-project-webtoken-test.png" />
    </Frame>

  </Step>
</Steps>

<Note>
  Contactez l’équipe Mintlify si vous avez besoin d’aide. Écrivez-nous
  [ici](https://mintlify.com/enterprise).
</Note>

[git-settings]: https://dashboard.mintlify.com/settings/deployment/git-settings
