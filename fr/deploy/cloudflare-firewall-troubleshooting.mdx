---
title: "Dépannage du pare-feu Cloudflare"
description: "Résoudre les erreurs 500 et les lenteurs de navigation causées par le blocage des ressources Mintlify par Cloudflare"
---

Si votre site de documentation affiche des erreurs 500 après quelques secondes ou connaît des lenteurs de navigation, le pare-feu Cloudflare peut bloquer les requêtes vers les ressources Mintlify.

<div id="symptoms">
  ## Symptômes
</div>

- La page de documentation se charge d’abord, puis plante avec une erreur 500 au bout de 30 à 60 secondes
- Navigation côté client lente ou défaillante entre les pages
- Erreurs 403 dans la console du navigateur pour les requêtes vers les chemins `/mintlify-assets/*`
- Messages de sécurité Cloudflare évoquant des « données malformées » ou des « modèles d’URL suspects »

<div id="root-cause">
  ## Cause racine
</div>

Le pare-feu d’applications web (WAF) de Cloudflare et le Bot Fight Mode peuvent considérer les requêtes d’actifs Mintlify comme suspectes en raison de :

- La présence de plusieurs symboles « % » dans les paramètres d’URL encodés
- De longues chaînes de requête avec des caractères spéciaux
- Des requêtes automatisées provenant d’onglets inactifs

<div id="solution">
  ## Solution
</div>

Créez une règle de pare-feu Cloudflare pour exclure les ressources Mintlify des contrôles de sécurité.

<div id="create-the-firewall-exception">
  ### Créer l’exception de pare-feu
</div>

1. Connectez-vous à votre [Cloudflare dashboard](https://dash.cloudflare.com/)
2. Sélectionnez votre domain
3. Accédez à **Security > WAF**
4. Sélectionnez **Create rule**
5. Configurez la règle avec ces paramètres :

**Nom de la règle :** Autoriser les ressources Mintlify

**Lorsque les requêtes entrantes correspondent :**

- Field: `Hostname`
- Operator: `equals`
- Value: `docs.yourdomain.com` (remplacez par le domain réel de votre documentation)

**Et :**

- Field: `URI Path`
- Operator: `starts with`
- Value: `/mintlify-assets/`

**Alors :**

- Action: `Skip`
- Select: `All remaining custom rules`, `Managed rules`, and `Super Bot Fight Mode`

6. Activez **Log** pour suivre les requêtes correspondantes
7. Sélectionnez **Deploy**

<div id="verify-the-rule">
  ### Vérifier la règle
</div>

Après le déploiement :

1. Ouvrez votre site de documentation dans un navigateur
2. Laissez la page inactive pendant 2 à 3 minutes
3. Naviguez entre les pages
4. Vérifiez la console du navigateur pour voir s’il y a des erreurs 403

Si les problèmes persistent, vérifiez la configuration de votre règle :

- Assurez-vous que le nom d’hôte correspond exactement à votre domain de documentation
- Confirmez que le chemin URI utilise « starts with » (et non « contains »)
- N’incluez pas de caractères génériques (`*`) dans la value du chemin
- Vérifiez que la règle est activée et déployée

<div id="common-mistakes">
  ## Erreurs courantes
</div>

- Utiliser l’opérateur `contains` avec `/mintlify-assets/*` - Le `*` est interprété comme un caractère littéral, pas comme un caractère générique
- Utiliser `equals` pour le chemin URI - Cela ne fait correspondre que le chemin exact `/mintlify-assets/` et non les sous-chemins
- Oublier d’exclure le Bot Fight Mode - Cela doit être explicitement ajouté à l’action d’exclusion
- Nom d’hôte incorrect - Doit correspondre à votre domain de documentation réel

<div id="additional-troubleshooting">
  ## Résolution de problèmes supplémentaire
</div>

Si l’exception du pare-feu ne résout pas le problème :

1. Consultez le journal **Security > Events** de Cloudflare pour identifier les requêtes bloquées
2. Vérifiez que votre Cloudflare Worker (si vous utilisez un sous-chemin personnalisé) transmet correctement l’en-tête `Host`
3. Réglez temporairement le niveau de sécurité sur « Essentially Off » pour confirmer que Cloudflare est bien en cause
4. Vérifiez d’éventuelles Page Rules personnalisées susceptibles d’outrepasser l’exception du pare-feu

<div id="example-working-configuration">
  ## Exemple de configuration fonctionnelle
</div>

```
Règle : Autoriser les ressources Mintlify
Statut : Activé

Lorsque les requêtes entrantes correspondent à :
  (http.host eq "docs.flashnet.xyz" and starts_with(http.request.uri.path, "/mintlify-assets/"))

Alors :
  Ignorer : Toutes les règles personnalisées restantes, Règles gérées, Mode Super Bot Fight
  Journal : Activé
```
