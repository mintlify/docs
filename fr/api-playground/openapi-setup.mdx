---
title: "Configuration d’OpenAPI"
description: "Référencez des endpoints OpenAPI dans vos pages de documentation"
icon: "file-json"
---

OpenAPI est une spécification pour décrire des API. Mintlify prend en charge les documents OpenAPI 3.0+ pour générer une documentation API interactive et la maintenir à jour.

## Ajouter un fichier de spécification OpenAPI

Pour documenter vos endpoints avec OpenAPI, vous avez besoin d’un document OpenAPI valide au format JSON ou YAML conforme à la [spécification OpenAPI 3.0\+](https://swagger.io/specification/).

Vous pouvez créer des pages d’API à partir d’un ou de plusieurs documents OpenAPI.

### Décrire votre API

Nous recommandons les ressources suivantes pour apprendre et concevoir vos documents OpenAPI.

- [Le guide OpenAPI de Swagger](https://swagger.io/docs/specification/v3_0/basic-structure/) pour apprendre la syntaxe OpenAPI.
- [Les sources Markdown de la spécification OpenAPI](https://github.com/OAI/OpenAPI-Specification/blob/main/versions/) pour consulter les détails de la dernière spécification OpenAPI.
- [Swagger Editor](https://editor.swagger.io/) pour modifier, valider et déboguer votre document OpenAPI.
- [La CLI Mint](https://www.npmjs.com/package/mint) pour valider votre document OpenAPI avec la commande : `mint openapi-check <openapiFilenameOrUrl>`.

<Note>
  Le guide OpenAPI de Swagger concerne OpenAPI v3.0, mais presque toutes les
  informations s’appliquent à la v3.1. Pour en savoir plus sur les différences
  entre la v3.0 et la v3.1, consultez [Migrer d’OpenAPI 3.0 à
  3.1.0](https://www.openapis.org/blog/2021/02/16/migrating-from-openapi-3-0-to-3-1-0)
  sur le blog OpenAPI.
</Note>

### Spécifier l’URL de votre API

Pour activer des fonctionnalités Mintlify comme le Terrain de jeu API, ajoutez un champ `servers` à votre document OpenAPI avec l’URL de base de votre API.

```json
{
  "servers": [
    {
      "url": "https://api.example.com/v1"
    }
  ]
}
```

Dans un document OpenAPI, les différents endpoints d’API sont définis par leurs chemins, comme `/users/{id}` ou simplement `/`. L’URL de base indique où ces chemins doivent être ajoutés. Pour plus d’informations sur la configuration du champ `servers`, consultez [API Server and Base Path](https://swagger.io/docs/specification/api-host-and-base-path/) dans la documentation OpenAPI.

Le Terrain de jeu API utilise ces URL de serveur pour déterminer où envoyer les requêtes. Si vous spécifiez plusieurs serveurs, un menu déroulant permettra aux utilisateurs de basculer entre eux. Si vous ne spécifiez pas de serveur, le Terrain de jeu API utilisera le mode simple puisqu’il ne peut pas envoyer de requêtes sans URL de base.

Si votre API possède des endpoints disponibles à des URL différentes, vous pouvez [remplacer le champ servers](https://swagger.io/docs/specification/v3_0/api-host-and-base-path/#overriding-servers) pour un chemin ou une opération donnée.

### Spécifier l’authentification

Pour activer l’authentification dans votre documentation et dans le Terrain de jeu API, configurez les champs `securitySchemes` et `security` dans votre document OpenAPI. Les descriptions d’API et le Terrain de jeu API ajouteront des champs d’authentification en fonction des configurations de sécurité de votre document OpenAPI.

<Steps>
  <Step title="Définissez votre méthode d’authentification.">
  Ajoutez un champ `securitySchemes` pour définir comment les utilisateurs s’authentifient.

Cet exemple montre une configuration pour l’authentification Bearer.

```json
{
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}
```

  </Step>
  <Step title="Appliquez l’authentification à vos endpoints.">
  Ajoutez un champ `security` pour exiger une authentification.

```json
{
  "security": [
    {
      "bearerAuth": []
    }
  ]
}
```

  </Step>
</Steps>

Les types d’authentification courants incluent :

- [API Keys](https://swagger.io/docs/specification/authentication/api-keys/) : clés transmises via en-tête, requête ou cookie.
- [Bearer](https://swagger.io/docs/specification/authentication/bearer-authentication/) : jetons JWT ou OAuth.
- [Basic](https://swagger.io/docs/specification/authentication/basic-authentication/) : nom d’utilisateur et mot de passe.

Si différents endpoints de votre API requièrent des méthodes d’authentification différentes, vous pouvez [remplacer le champ security](https://swagger.io/docs/specification/authentication/#:~:text=you%20can%20apply%20them%20to%20the%20whole%20API%20or%20individual%20operations%20by%20adding%20the%20security%20section%20on%20the%20root%20level%20or%20operation%20level%2C%20respectively.) pour une opération donnée.

Pour plus d’informations sur la définition et l’application de l’authentification, consultez [Authentication](https://swagger.io/docs/specification/authentication/) dans la documentation OpenAPI.

## Extension `x-mint`

L’extension `x-mint` est une extension OpenAPI personnalisée qui offre un contrôle supplémentaire sur la manière dont votre documentation API est générée et affichée.

### Métadonnées

Remplacez les métadonnées par défaut des pages API générées en ajoutant `x-mint: metadata` à n’importe quelle opération. Vous pouvez utiliser tout champ de métadonnées valide dans le frontmatter `MDX`, à l’exception de `openapi` :

```json {7-13}
{
  "paths": {
    "/users": {
      "get": {
        "summary": "Get users",
        "description": "Retrieve a list of users",
        "x-mint": {
          "metadata": {
            "title": "List all users",
            "description": "Fetch paginated user data with filtering options",
            "og:title": "Display a list of users"
          }
        },
        "parameters": [
          {
            // Parameter configuration
          }
        ]
      }
    }
  }
}
```

### Contenu

Ajoutez du contenu avant la documentation API générée automatiquement à l’aide de `x-mint: content` :

```json {6-8}
{
  "paths": {
    "/users": {
      "post": {
        "summary": "Create user",
        "x-mint": {
          "content": "## Prerequisites\n\nThis endpoint requires admin privileges and has rate limiting.\n\n<Note>User emails must be unique across the system.</Note>"
        },
        "parameters": [
          {
            // Parameter configuration
          }
        ]
      }
    }
  }
}
```

L’extension `content` prend en charge tous les composants et la mise en forme MDX de Mintlify.

### Href

Modifiez l’URL de la page de l’endpoint dans votre documentation à l’aide de `x-mint: href` :

```json {6-8, 14-16}
{
  "paths": {
    "/legacy-endpoint": {
      "get": {
        "summary": "Legacy endpoint",
        "x-mint": {
          "href": "/deprecated-endpoints/legacy-endpoint"
        }
      }
    },
    "/documented-elsewhere": {
      "post": {
        "summary": "Special endpoint",
        "x-mint": {
          "href": "/guides/special-endpoint-guide"
        }
      }
    }
  }
}
```

Lorsque `x-mint: href` est présent, l’entrée de navigation pointe directement vers l’URL spécifiée au lieu de générer une page API.

### MCP

Exposez de manière sélective des endpoints comme outils Model Context Protocol (MCP) à l’aide de `x-mint: mcp`. N’activez que les endpoints sûrs pour un accès public via des outils d’IA.

<ResponseField name="mcp" type="object">
  La configuration MCP pour l’endpoint.

  <Expandable title="MCP">
    <ResponseField name="enabled" type="boolean">
      Indique s’il faut exposer l’endpoint comme outil MCP. Prend le pas sur la configuration au niveau du fichier.
    </ResponseField>
    <ResponseField name="name" type="string">
      Le nom de l’outil MCP.
    </ResponseField>
    <ResponseField name="description" type="string">
      La description de l’outil MCP.
    </ResponseField>
  </Expandable>
</ResponseField>

<CodeGroup>
```json Selective enablement {6-9} wrap
{
  "paths": {
    "/users": {
      "post": {
        "summary": "Create user",
        "x-mint": {
          "mcp": {
            "enabled": true
          },
          // ...
        }
      }
    },
    "/users": {
      "delete": {
        "summary": "Delete user (admin only)",
        // No `x-mint: mcp` so this endpoint is not exposed as an MCP tool
        // ...
      }
    }
  }
}
```

```json Global enablement {3-5, 9-13} wrap
{
  "openapi": "3.1.0",
  "x-mcp": {
      "enabled": true // All endpoints are exposed as MCP tools by default
    },
  "paths": {
    "/api/admin/delete": {
      "delete": {
        "x-mint": {
          "mcp": {
            "enabled": false // Disable MCP for this endpoint
          }
        },
        "summary": "Delete resources"
      }
    }
  }
}
```
</CodeGroup>

Pour en savoir plus, consultez le [Model Context Protocol](/fr/ai/model-context-protocol).

## Renseigner automatiquement les pages API

Ajoutez un champ `openapi` à n’importe quel élément de navigation dans votre `docs.json` pour générer automatiquement des pages pour les endpoints OpenAPI. Vous pouvez contrôler l’endroit où ces pages apparaissent dans votre structure de navigation, en tant que sections API dédiées ou aux côtés d’autres pages.

Le champ `openapi` accepte soit un chemin de fichier dans votre dépôt de documentation, soit une URL vers un document OpenAPI hébergé.

Les pages d’endpoint générées ont les valeurs de métadonnées par défaut suivantes :

- `title` : le champ `summary` de l’opération, s’il est présent. S’il n’y a pas de `summary`, le titre est généré à partir de la méthode HTTP et de l’endpoint.
- `description` : le champ `description` de l’opération, s’il est présent.
- `version` : la valeur `version` de l’ancre ou de l’onglet parent, si elle est présente.
- `deprecated` : le champ `deprecated` de l’opération. Si `true`, une étiquette « obsolète » apparaîtra à côté du titre de l’endpoint dans la navigation latérale et sur la page de l’endpoint.

<Tip>
  Pour exclure des endpoints spécifiques de vos pages API générées automatiquement, ajoutez la propriété
  [x-hidden](/fr/api-playground/customization/managing-page-visibility#x-hidden)
  à l’opération dans votre spécification OpenAPI.
</Tip>

Il existe deux approches pour ajouter des pages d’endpoint à votre documentation :

1. **Sections API dédiées** : référencez des spécifications OpenAPI dans des éléments de navigation pour des sections API dédiées.
2. **Endpoints ciblés** : référencez des endpoints spécifiques dans votre navigation aux côtés d’autres pages.

### Sections API dédiées

Générez des sections API dédiées en ajoutant un champ `openapi` à un élément de navigation et aucune autre page. Tous les endpoints de la spécification seront inclus :

```json {5}
"navigation": {
  "tabs": [
    {
        "tab": "API Reference",
        "openapi": "https://petstore3.swagger.io/api/v3/openapi.json"
    }
  ]
}
```

Vous pouvez utiliser plusieurs spécifications OpenAPI dans différentes sections de navigation :

```json {8-11, 15-18}
"navigation": {
  "tabs": [
    {
      "tab": "API Reference",
      "groups": [
        {
          "group": "Users",
          "openapi": {
            "source": "/path/to/openapi-1.json",
            "directory": "api-reference"
          }
        },
        {
          "group": "Admin",
          "openapi": {
            "source": "/path/to/openapi-2.json",
            "directory": "api-reference"
          }
        }
      ]
    }
  ]
}
```

<Note>
  Le champ `directory` est facultatif et précise où les pages API générées sont
  stockées dans votre dépôt de documentation. S’il n’est pas spécifié, la valeur par défaut est le répertoire
  `api-reference` de votre dépôt.
</Note>

### Endpoints ciblés

Lorsque vous souhaitez mieux contrôler l’emplacement des endpoints dans votre documentation, vous pouvez référencer des endpoints spécifiques dans votre navigation. Cette approche vous permet de générer des pages pour des endpoints d’API aux côtés d’autres contenus.

#### Définir une spécification OpenAPI par défaut

Configurez une spécification OpenAPI par défaut pour un élément de navigation. Référencez ensuite des endpoints spécifiques dans le champ `pages` :

```json {12, 15-16}
"navigation": {
  "tabs": [
    {
      "tab": "Getting started",
      "pages": [
        "quickstart",
        "installation"
      ]
    },
    {
      "tab": "API reference",
      "openapi": "/path/to/openapi.json",
      "pages": [
        "api-overview",
        "GET /users",
        "POST /users",
        "guides/authentication"
      ]
    }
  ]
}
```

Toute entrée de page correspondant au format `METHOD /path` générera une page API pour cet endpoint en utilisant la spécification OpenAPI par défaut.

#### Héritage de la spécification OpenAPI

Les spécifications OpenAPI sont héritées dans la hiérarchie de navigation. Les éléments de navigation enfants héritent de la spécification OpenAPI de leur parent, sauf s’ils définissent la leur :

```json {3, 7-8, 11, 13-14}
{
  "group": "API reference",
  "openapi": "/path/to/openapi-v1.json",
  "pages": [
    "overview",
    "authentication",
    "GET /users",
    "POST /users",
    {
      "group": "Orders",
      "openapi": "/path/to/openapi-v2.json",
      "pages": [
        "GET /orders",
        "POST /orders"
      ]
    }
  ]
}
```

#### Endpoints individuels

Référencez des endpoints spécifiques sans définir de spécification OpenAPI par défaut en incluant le chemin du fichier :

```json {5-6}
"navigation": {
  "pages": [
    "introduction",
    "user-guides",
    "/path/to/openapi-v1.json POST /users",
    "/path/to/openapi-v2.json GET /orders"
  ]
}
```

Cette approche est utile lorsque vous avez besoin d’endpoints individuels provenant de différentes spécifications ou souhaitez uniquement inclure des endpoints sélectionnés.

## Créer des fichiers `MDX` pour les pages API

Pour contrôler chaque page de point de terminaison individuellement, créez une page `MDX` par opération. Vous pourrez ainsi personnaliser les métadonnées de la page, ajouter du contenu, omettre certaines opérations ou réorganiser les pages dans la navigation, au niveau de chaque page.

Consultez un [exemple de page OpenAPI en MDX chez MindsDB](https://github.com/mindsdb/mindsdb/blob/main/docs/rest/databases/create-databases.mdx?plain=1) et son rendu dans leur [documentation en ligne](https://docs.mindsdb.com/rest/databases/create-databases).

### Spécifier les fichiers manuellement

Créez une page `MDX` pour chaque point de terminaison et indiquez quelle opération OpenAPI afficher à l’aide du champ `openapi` dans le frontmatter.

Lorsque vous référencez une opération OpenAPI de cette manière, le nom, la description, les paramètres, les réponses et le Terrain de jeu API sont générés automatiquement à partir de votre document OpenAPI.

Si vous avez plusieurs fichiers OpenAPI, incluez le chemin du fichier dans votre référence pour vous assurer que Mintlify trouve le bon document OpenAPI. Si vous n’avez qu’un seul fichier OpenAPI, Mintlify le détectera automatiquement.

<Note>
  Cette approche fonctionne que vous ayez ou non défini une spécification OpenAPI par défaut
  dans votre navigation. Vous pouvez référencer n’importe quel point de terminaison depuis n’importe quelle spécification OpenAPI en
  incluant le chemin du fichier dans le frontmatter.
</Note>

Si vous souhaitez référencer un fichier OpenAPI externe, ajoutez l’URL du fichier à votre `docs.json`.

<CodeGroup>

```mdx Example
---
title: "Get users"
description: "Returns all plants from the system that the user has access to"
openapi: "/path/to/openapi-1.json GET /users"
deprecated: true
version: "1.0"
---
```

```mdx Format
---
title: "title of the page"
description: "description of the page"
openapi: openapi-file-path method path
deprecated: boolean (not required)
version: "version-string" (not required)
---
```

</CodeGroup>

<Note>
  La méthode et le chemin doivent correspondre exactement à la définition de votre
  spécification OpenAPI. Si le point de terminaison n’existe pas dans le fichier OpenAPI,
  la page sera vide.
</Note>

### Générer automatiquement des fichiers `MDX`

Utilisez notre [scraper](https://www.npmjs.com/package/@mintlify/scraping) Mintlify pour générer automatiquement des pages `MDX` pour les gros documents OpenAPI.

<Note>
  Votre document OpenAPI doit être valide, sinon les fichiers ne seront pas générés automatiquement.
</Note>

Le scraper génère :

- Une page `MDX` pour chaque opération dans le champ `paths` de votre document OpenAPI.
- Si votre document OpenAPI est en version 3.1+, une page `MDX` pour chaque opération dans le champ `webhooks` de votre document OpenAPI.
- Un tableau d’entrées de navigation que vous pouvez ajouter à votre `docs.json`.

<Steps>
  <Step title="Générer des fichiers `MDX`.">
    ```bash
    npx @mintlify/scraping@latest openapi-file <path-to-openapi-file>
    ```
  </Step>
  <Step title="Spécifier un dossier de sortie.">
    ```bash
    npx @mintlify/scraping@latest openapi-file <path-to-openapi-file> -o api-reference
    ```

    Ajoutez l’option `-o` pour spécifier un dossier dans lequel créer les fichiers. Si aucun dossier n’est spécifié, les fichiers seront créés dans le répertoire de travail.
  </Step>
</Steps>

### Créer des fichiers `MDX` pour les schémas OpenAPI

Vous pouvez créer des pages individuelles pour tout schéma OpenAPI défini dans le champ `components.schema` d’un document OpenAPI :

<CodeGroup>

```mdx Example
---
openapi-schema: OrderItem
---
```

```mdx Format
---
openapi-schema: "schema-key"
---
```

</CodeGroup>

## Webhooks

Les webhooks sont des callbacks HTTP que votre API envoie pour notifier des systèmes externes lorsque des événements se produisent. Les webhooks sont pris en charge dans les documents OpenAPI 3.1+.

### Définir des webhooks dans votre spécification OpenAPI

Ajoutez un champ `webhooks` à votre document OpenAPI, en complément du champ `paths`.

Pour plus d’informations sur la définition des webhooks, consultez [Webhooks](https://spec.openapis.org/oas/v3.1.0#oasWebhooks) dans la documentation OpenAPI.

### Référencer des webhooks dans des fichiers MDX

Lorsque vous créez des pages MDX pour des webhooks, utilisez `webhook` au lieu de méthodes HTTP comme `GET` ou `POST` :

```mdx
---
title: "Exemple de webhook"
description: "Déclenché lorsqu’un événement se produit"
openapi: "path/to/openapi-file webhook example-webhook-name"
---
```

<Note>
  Le nom du webhook doit correspondre exactement à la clé définie dans le champ `webhooks` de votre
  spécification OpenAPI.
</Note>
