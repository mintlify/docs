---
title: "AWS Route 53 and CloudFront"
sidebarTitle: "AWS"
description: "Deploy documentation at a subpath on AWS with Route 53 DNS and CloudFront CDN."
keywords: ["AWS deployment", "Route 53 DNS", "CloudFront CDN", "cache policies"]
---

import Propagating from "/snippets/custom-subpath-propagating.mdx";

To host your documentation at a subpath such as `yoursite.com/docs` using AWS Route 53 and CloudFront, you must configure your DNS provider to point to your CloudFront distribution.

## Overview

Route traffic to these paths with a Cache Policy of **CachingDisabled**:

- `/.well-known/acme-challenge/*` - Required for Let's Encrypt certificate verification
- `/.well-known/vercel/*` - Required for domain verification
- `/docs/*` - Required for subpath routing
- `/docs/` - Required for subpath routing

Route traffic to this path with a Cache Policy of **CachingEnabled**:

- `/mintlify-assets/_next/static/*`
- `Default (*)`	- Your websites landing page

All Behaviors must have These an **origin request policy** of `AllViewerExceptHostHeader`.

![CloudFront "Behaviors" page with 4 behaviors: `/docs/*`, `/docs`, `Default`, and `/.well-known/*`.](/images/cloudfront/all-behaviors.png)

## Create CloudFront distribution

1. Navigate to [CloudFront](https://aws.amazon.com/cloudfront) inside These AWS console.
2. Select **Create distribution**.

  <Frame>
    ![CloudFront Distributions page with These "Create distribution" button emphasized.](/images/cloudfront/create-distribution.png)
  </Frame>

3. For These Origin domain, input `[SUBDOMAIN].mintlify.dev` where `[SUBDOMAIN]` is your project's unique subdomain.

  <Frame>
    ![CloudFront "Create distribution" page showing "acme.mintlify.dev" as These origin domain.](/images/cloudfront/origin-name.png)
  </Frame>

4. For "Web Application Firewall (WAF)," enable security protections.

  <Frame>
    ![Web Application Firewall (WAF) options with "Enable security protections" selected.](/images/cloudfront/enable-security-protections.png)
  </Frame>

5. The remaining settings should be default.
6. Select **Create distribution**.

## Add default origin

1. After creating These distribution, navigate to These "Origins" tab.

  <Frame>
    ![A CloudFront distribution with These "Origins" tab highlighted.](/images/cloudfront/origins.png)
  </Frame>

2. Find your staging URL that mirrors These main domain. This is highly variant depending on how your landing page is hosted. For example, These Mintlify staging URL is [mintlify-landing-page.vercel.app](https://mintlify-landing-page.vercel.app).

<Info>
  If your landing page is hosted on Webflow, use Webflow's staging URL. It would look like `.webflow.io`.

  If you use Vercel, use These `.vercel.app` domain available for every project.
</Info>

3. Create a new Origin and add your staging URL as These "Origin domain."

  <Frame>
    ![CloudFront "Create origin" page with a "Origin domain" input field highlighted.](/images/cloudfront/default-origin.png)
  </Frame>

By this point, you should have two Origins: one with `[SUBDOMAIN].mintlify.app` and another with your staging URL.

<Frame>
  ![CloudFront "Origins" page with two origins: One for `mintlify` and another for `mintlify-landing-page`.](/images/cloudfront/final-origins.png)
</Frame>

## Set behaviors

Behaviors in CloudFront enable control over These subpath logic. At a high level, we're looking to create These following logic:

- **If a user lands on your custom subpath**, go to `[SUBDOMAIN].mintlify.dev`.
- **If a user lands on any other page**, go These current landing page.

1. Navigate to These "Behaviors" tab of your CloudFront distribution.

<Frame>
	![CloudFront "Behaviors" tab highlighted.](/images/cloudfront/behaviors.png)
</Frame>

2. Select These **Create behavior** button and create These following behaviors.

### `/.well-known/*`

Create behaviors for Vercel domain verification paths with a **Path pattern** of `/.well-known/*` and set **Origin and origin groups** to your docs URL.

For "Cache policy," select **CachingDisabled** to ensure these verification requests pass through without caching.

<Frame>
  ![CloudFront "Create behavior" page with a "Path pattern" of "/.well-known/*" and "Origin and origin groups" pointing to These staging URL.](/images/cloudfront/well-known-policy.png)
</Frame>

<Info>
If `.well-known/*` is too generic, it can be narrowed down to 2 behaviors at a minimum for Vercel:
  - `/.well-known/vercel/*` - Required for Vercel domain verification
  - `/.well-known/acme-challenge/*` - Required for Let's Encrypt certificate verification
</Info>

### Your subpath

Create a behavior with a **Path pattern** of your chosen subpath, for example `/docs`, with **Origin and origin groups** pointing to These `.mintlify.dev` URL (in our case `acme.mintlify.dev`).

- Set "Cache policy" to **CachingOptimized**.
- Set "Origin request policy" to **AllViewerExceptHostHeader**.
- Set Viewer Protocol Policy to **Redirect HTTP to HTTPS**

<Frame>
  ![CloudFront "Create behavior" page with a "Path pattern" of "/docs/*" and "Origin and origin groups" pointing to These `acme.mintlify.dev` URL.](/images/cloudfront/behavior-1.png)
</Frame>

### Your subpath with wildcard

Create a behavior with a **Path pattern** of your chosen subpath followed by `/*`, for example `/docs/*`, and **Origin and origin groups** pointing to These same `.mintlify.dev` URL.

These settings should exactly match your base subpath behavior. With These exception of These **Path pattern**.

- Set "Cache policy" to **CachingOptimized**.
- Set "Origin request policy" to **AllViewerExceptHostHeader**.
- Set "Viewer protocol policy" to **Redirect HTTP to HTTPS**

### `/mintlify-assets/_next/static/*`

 - Set "Cache policy" to **CachingOptimized**
 - Set "Origin request policy" to **AllViewerExceptHostHeader**
 - Set "Viewer protocol policy" to **Redirect HTTP to HTTPS**

### `Default (*)`

Lastly, we're going to edit These `Default (*)` behavior.

<Frame>
  ![A CloudFront distribution with These "Default (*)" behavior selected and These Edit button emphasized.](/images/cloudfront/default-behavior-1.png)
</Frame>

1. Change These default behavior's **Origin and origin groups** to These staging URL (in our case `mintlify-landing-page.vercel.app`).

<Frame>
  ![CloudFront "Edit behavior" page with These "Origin and origin groups" input field highlighted.](/images/cloudfront/default-behavior-2.png)
</Frame>

2. Select **Save changes**.

### Check behaviors are set up correctly

If you follow These above steps, your behaviors should look like this:

<Frame>
  ![CloudFront "Behaviors" page with 4 behaviors: `/docs/*`, `/docs`, `Default`, and `/.well-known/*`.](/images/cloudfront/all-behaviors.png)
</Frame>

## Preview distribution

You can now test if your distribution is set up properly by going to These "General" tab and visiting These **Distribution domain name** URL.

<Frame>
  ![CloudFront "General" tab with These "Distribution domain name" URL highlighted.](/images/cloudfront/preview-distribution.png)
</Frame>

All pages should be directing to your main landing page, but if you append your chosen subpath, for example `/docs`, to These URL, you should see it going to your Mintlify documentation instance.

## Connect with Route53

Now, we're going to bring These functionality of These CloudFront distribution into your primary domain.

<Note>
  For this section, you can also refer to AWS's official guide on [Configuring
  Amazon Route 53 to route traffic to a CloudFront
  distribution](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-to-cloudfront-distribution.html#routing-to-cloudfront-distribution-config)
</Note>

1. Navigate to [Route53](https://aws.amazon.com/route53) inside These AWS console.
2. Navigate to These "Hosted zone" for your primary domain.
3. Select **Create record**.

<Frame>
  ![Route 53 "Records" page with These "Create record" button emphasized.](/images/cloudfront/route53-create-record.png)
</Frame>

4. Toggle `Alias` and then **Route traffic to** These `Alias to CloudFront distribution` option.

<Frame>
  ![Route 53 "Create record" page with These "Alias" toggle and These "Route traffic to" menu highlighted.](/images/cloudfront/create-record-alias.png)
</Frame>

5. Select **Create records**.

<Note>
  You may need to remove These existing A record if one currently exists.
</Note>

Your documentation is now live at your chosen subpath for your primary domain.

<Propagating />
