export const VercelJsonGenerator = () => {
  const [subdomain, setSubdomain] = useState('[SUBDOMAIN]')
  const [subdirectory, setSubdirectory] = useState('docs')

  const vercelConfig = {
    rewrites: [
      {
        source: "/api/request",
        destination: `https://${subdomain}.mintlify.app/api/request`
      },
      {
        source: `/${subdirectory}`,
        destination: `https://${subdomain}.mintlify.app`
      },
      {
        source: `/${subdirectory}/llms.txt`,
        destination: `https://${subdomain}.mintlify.app/llms.txt`
      },
      {
        source: `/${subdirectory}/llms-full.txt`,
        destination: `https://${subdomain}.mintlify.app/llms-full.txt`
      },
      {
        source: `/${subdirectory}/sitemap.xml`,
        destination: `https://${subdomain}.mintlify.app/sitemap.xml`
      },
      {
        source: `/${subdirectory}/robots.txt`,
        destination: `https://${subdomain}.mintlify.app/robots.txt`
      },
      {
        source: `/${subdirectory}/:path*`,
        destination: `https://${subdomain}.mintlify.app/${subdirectory}/:path*`
      },
      {
        source: "/mintlify-assets/:path+",
        destination: `https://${subdomain}.mintlify.app/mintlify-assets/:path+`
      }
    ]
  }

  const copyToClipboard = () => {
    navigator.clipboard
      .writeText(JSON.stringify(vercelConfig, null, 2))
      .then(() => {
        console.log('Copied config to clipboard!')
      })
      .catch((err) => {
        console.error("Failed to copy: ", err)
      })
  }

  return (
    <div className="p-4 border dark:border-white/10 rounded-2xl not-prose space-y-4">
      <div className="space-y-4">
        <div>
          <label className="block text-sm text-zinc-950/70 dark:text-white/70 mb-1">
            Subdomain
          </label>
          <input
            type="text"
            value={subdomain}
            onChange={(e) => setSubdomain(e.target.value)}
            placeholder="your-subdomain"
            className="w-full p-1 text-sm rounded border dark:border-white/10 bg-transparent"
          />
        </div>
        <div>
          <label className="block text-sm text-zinc-950/70 dark:text-white/70 mb-1">
            Subdirectory
          </label>
          <input
            type="text"
            value={subdirectory}
            onChange={(e) => setSubdirectory(e.target.value)}
            placeholder="docs"
            className="w-full p-1 text-sm rounded border dark:border-white/10 bg-transparent"
          />
        </div>
      </div>
      <div className="relative">
        <button
          onClick={copyToClipboard}
          className="absolute top-2 right-2 px-2 py-1 text-sm border dark:border-white/10 rounded hover:bg-zinc-950/5 dark:hover:bg-white/5 transition-colors bg-white"
        >
          Copy to Clipboard
        </button>
        <pre className="bg-zinc-950/5 dark:bg-white/5 p-4 rounded-lg overflow-auto text-xs">
          <code>{JSON.stringify(vercelConfig, null, 2)}</code>
        </pre>
      </div>
    </div>
  )
}
