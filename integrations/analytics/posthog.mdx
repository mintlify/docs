---
title: "PostHog"
---

Add the following to your `docs.json` file to send analytics to PostHog.

You only need to include `apiHost` if you are self-hosting PostHog. We send events to `https://app.posthog.com` by default.

<CodeGroup>

```json Analytics options in docs.json
"integrations": {
    "posthog": {
        "apiKey": "YOUR_POSTHOG_PROJECT_API_KEY",
        "apiHost": "optional",
        "sessionRecording": true
    }
}
```

```json Example
"integrations": {
    "posthog": {
        "apiKey": "phc_TXdpocbYTeZVm5VJmMzHTMrCofBQu3e0kN7HGMNGTVW"
    }
}
```

</CodeGroup>

### Configuration options

<ParamField path="apiKey" type="string" required>
  Your PostHog project API key. Must start with `phc_`.
</ParamField>

<ParamField path="apiHost" type="string">
  The URL of your PostHog instance. Only required if you are self-hosting PostHog. Defaults to `https://app.posthog.com`.
</ParamField>

<ParamField path="sessionRecording" type="boolean" default="true">
  Enable or disable session recording. Set to `false` to disable session recordings while keeping analytics enabled.
</ParamField>

<br />

<Warning>
    Enabling PostHog analytics will disable the analytics on the Mintlify dashboard.
</Warning>

## Session recordings

Session recordings are enabled by default when you configure PostHog. To disable session recordings while keeping analytics enabled, set `sessionRecording` to `false` in your configuration.

```json Disable session recordings
"integrations": {
    "posthog": {
        "apiKey": "phc_your-key",
        "sessionRecording": false
    }
}
```

You need to add the URL for your docs website to PostHog's "Authorized domains for recordings" before you can receive session recordings. The option to add your URL is in PostHog's project settings.

### Conditionally enable session recording

To record only the sessions that matter, disable session recording by default and opt users in when they meet your criteria.

1. Set `sessionRecording` to `false` in your `docs.json` so PostHog loads without recording automatically (see the example above).
2. Add a custom script that checks your condition and calls `posthog.startSessionRecording()` when it returns `true`. Call `posthog.stopSessionRecording()` when the condition no longer applies.

```js Conditional recording (files/custom-scripts/posthog-session-recording.js)
export default function togglePosthogRecording() {
  if (!window.posthog) return;

  const shouldRecord = window.location.pathname.startsWith('/flows');

  if (shouldRecord && !window.posthog.sessionRecordingStarted()) {
    window.posthog.startSessionRecording();
  } else if (!shouldRecord && window.posthog.sessionRecordingStarted()) {
    window.posthog.stopSessionRecording();
  }
}
```

Import the script in `docs.json`:

```json
"scripts": ["/files/custom-scripts/posthog-session-recording.js"]
```

The exported function runs when the script loads. If you perform client-side routing in additional custom code, call the function again after navigation so the recording state stays in sync. Customize the `shouldRecord` logic to match your requirementsâ€”for example, check personalization data from your auth provider or only record users on a specific plan. Review PostHog's [session recording guide](https://posthog.com/docs/session-replay/manual) for additional helper methods.
