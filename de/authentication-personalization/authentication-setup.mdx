---
title: "Einrichtung der Authentifizierung"
description: "Steuern Sie die Zugriffsrechte für Ihre Dokumentation, indem Sie Benutzer authentifizieren"
icon: "file-lock"
keywords: ['auth']
---

<Info>
  [Pro-Pläne](https://mintlify.com/pricing?ref=authentication) beinhalten die Passwort-Authentifizierung.

  [Enterprise-Pläne](https://mintlify.com/pricing?ref=authentication) beinhalten alle Authentifizierungsmethoden.
</Info>

Für die Authentifizierung müssen sich Benutzer anmelden, bevor sie auf Ihre Dokumentation zugreifen können.

<div id="authentication-modes">
  ## Authentifizierungsmodi
</div>

Wählen Sie je nach Ihren Anforderungen an die Zugriffskontrolle zwischen vollständiger und teilweiser Authentifizierung.

**Vollständige Authentifizierung**: Alle Seiten sind geschützt. Nutzer müssen sich anmelden, bevor sie auf Inhalte zugreifen können.

**Teil-Authentifizierung**: Einige Seiten sind öffentlich sichtbar, während andere eine Anmeldung erfordern. Nutzer können öffentliche Inhalte frei durchsuchen und müssen sich nur anmelden, wenn sie auf geschützte Seiten zugreifen.

Bei der Konfiguration einer der folgenden Handshake-Methoden wählen Sie in den Dashboard-Einstellungen entweder **Vollständige Authentifizierung** oder **Teil-Authentifizierung** aus.

<div id="configuring-authentication">
  ## Authentifizierung konfigurieren
</div>

Wählen Sie die Handshake-Methode aus, die Sie konfigurieren möchten.

<Tabs>
  <Tab title="Password">
    <Info>
      Die Passwortauthentifizierung dient ausschließlich der Zugriffskontrolle und unterstützt **keine** Personalisierung von Inhalten.
    </Info>

    ### Voraussetzungen

    - Ihre Sicherheitsrichtlinien erlauben das gemeinsame Verwenden von Passwörtern durch mehrere Nutzer.

    ### Implementierung

    <Steps>
      <Step title="Passwort erstellen.">
        1. Öffnen Sie in Ihrem Dashboard [Authentication](https://dashboard.mintlify.com/settings/deployment/authentication).
        2. Wählen Sie **Full Authentication** oder **Partial Authentication**.
        3. Wählen Sie **Password**.
        4. Geben Sie ein sicheres Passwort ein.
        5. Wählen Sie **Save changes**.
      </Step>

      <Step title="Zugriff verteilen.">
        Geben Sie das Passwort und die Dokumentations-URL sicher an autorisierte Nutzer weiter.
      </Step>
    </Steps>

    ## Beispiel

    Ihre Dokumentation ist unter `docs.foo.com` verfügbar, und Sie benötigen eine einfache Zugriffskontrolle, ohne einzelne Benutzer nachzuverfolgen. Sie möchten den öffentlichen Zugriff verhindern und gleichzeitig die Einrichtung schlank halten.

    **Erstellen Sie ein starkes Passwort** in Ihrem Dashboard. **Teilen Sie die Zugangsdaten** mit autorisierten Nutzern. Das war’s!
  </Tab>

  <Tab title="Mintlify Dashboard">
    ### Voraussetzungen

    - Ihre Dokumentationsnutzer sind zugleich Ihre Dokumentationsbearbeiter.

    ### Implementierung

    <Steps>
      <Step title="Authentifizierung im Mintlify-Dashboard aktivieren.">
        1. Gehen Sie in Ihrem Dashboard zu [Authentication](https://dashboard.mintlify.com/settings/deployment/authentication).
        2. Wählen Sie **Full Authentication** oder **Partial Authentication**.
        3. Wählen Sie **Mintlify Auth**.
        4. Wählen Sie **Enable Mintlify Auth**.
      </Step>

      <Step title="Autorisierte Benutzer hinzufügen.">
        1. Gehen Sie in Ihrem Dashboard zu [Members](https://dashboard.mintlify.com/settings/organization/members).
        2. Fügen Sie jede Person hinzu, die Zugriff auf Ihre Dokumentation erhalten soll.
        3. Weisen Sie passende Rollen entsprechend den Bearbeitungsberechtigungen zu.
      </Step>
    </Steps>

    ### Beispiel

    Ihre Dokumentation ist unter `docs.foo.com` gehostet und Ihr Team nutzt das Dashboard, um Ihre Docs zu bearbeiten. Sie möchten den Zugriff auf Teammitglieder beschränken.

    **Aktivieren Sie die Mintlify-Authentifizierung** in den Einstellungen Ihres Dashboards.

    **Überprüfen Sie den Teamzugriff**, indem Sie sicherstellen, dass alle Teammitglieder zu Ihrer Organisation hinzugefügt wurden.
  </Tab>

  <Tab title="OAuth 2.0">
    ### Voraussetzungen

    - Ein OAuth- oder OIDC-Server, der den Authorization Code Flow unterstützt.
    - Möglichkeit, einen API-Endpunkt zu erstellen, der über OAuth-Access-Tokens zugänglich ist (optional, um Personalisierungsfunktionen zu aktivieren).

    ### Implementierung

    <Steps>
      <Step title="Configure your OAuth settings.">
        1. Gehe in deinem Dashboard zu [Authentication](https://dashboard.mintlify.com/settings/deployment/authentication).
        2. Wähle **Full Authentication** oder **Partial Authentication**.
        3. Wähle **OAuth** und konfiguriere diese Felder:

        - **Authorization URL**: Dein OAuth-Endpunkt.
        - **Client ID**: Deine OAuth-2.0-Client-ID.
        - **Client Secret**: Dein OAuth-2.0-Client-Secret.
        - **Scopes**: Anzufordernde Berechtigungen. Kopiere die **gesamte** Scope-Zeichenkette (zum Beispiel: Bei einem Scope wie `provider.users.docs` kopiere das vollständige `provider.users.docs`). Verwende mehrere Scopes, wenn du unterschiedliche Zugriffsebenen benötigst.
        - **Token URL**: Dein OAuth-Endpunkt für den Token-Austausch.
        - **Info API URL** (optional): Endpunkt zum Abrufen von Benutzerinformationen für die Personalisierung. Wenn weggelassen, wird der OAuth-Flow nur zur Identitätsprüfung verwendet und die Benutzerinformationen bleiben leer.
        - **Logout URL**: Die native Logout-URL deines OAuth-Providers. Wenn dein Provider einen Parameter wie `returnTo` oder ähnlich hat, leite zurück auf die URL deiner Dokumentation.

        4. Wähle **Save changes**.
      </Step>

      <Step title="Configure your OAuth server.">
        1. Kopiere die **Redirect URL** aus deinen [authentication settings](https://dashboard.mintlify.com/settings/deployment/authentication).
        2. Füge die Redirect-URL als autorisierte Redirect-URL in deinem OAuth-Server hinzu.
      </Step>

      <Step title="Create your user info endpoint (optional).">
        Um Personalisierungsfunktionen zu aktivieren, erstelle einen API-Endpunkt, der:

        - OAuth-Access-Tokens zur Authentifizierung akzeptiert.
        - Benutzerdaten im `User`-Format zurückgibt. Siehe [User data format](/de/authentication-personalization/personalization-setup#user-data-format) für weitere Informationen.

        Füge diese Endpunkt-URL in das Feld **Info API URL** in deinen [authentication settings](https://dashboard.mintlify.com/settings/deployment/authentication) ein.
      </Step>
    </Steps>

    ### Beispiel

    Deine Dokumentation wird unter `foo.com/docs` gehostet und du hast einen bestehenden OAuth-Server unter `auth.foo.com`, der den Authorization Code Flow unterstützt.

    **Konfiguriere die Details deines OAuth-Servers** in deinem Dashboard:

    - **Authorization URL**: `https://auth.foo.com/authorization`
    - **Client ID**: `ydybo4SD8PR73vzWWd6S0ObH`
    - **Scopes**: `['provider.users.docs']`
    - **Token URL**: `https://auth.foo.com/exchange`
    - **Info API URL**: `https://api.foo.com/docs/user-info`
    - **Logout URL**: `https://auth.foo.com/logout?returnTo=https%3A%2F%2Ffoo.com%2Fdocs`

    **Erstelle einen User-Info-Endpunkt** unter `api.foo.com/docs/user-info`, der ein OAuth-Access-Token mit dem Scope `provider.users.docs` erfordert und Folgendes zurückgibt:

    ```json
    {
      "content": {
        "firstName": "Jane",
        "lastName": "Doe"
      },
      "groups": ["engineering", "admin"]
    }
    ```

    **Konfiguriere deinen OAuth-Server so, dass Redirects** zu deiner Callback-URL erlaubt sind.
  </Tab>

  <Tab title="JWT">
    ### Voraussetzungen

    - Ein Authentifizierungssystem, das JWTs erzeugen und signieren kann.
    - Ein Backend-Dienst, der Redirect-URLs erstellen kann.

    ### Implementierung

    <Steps>
      <Step title="Privaten Schlüssel generieren.">
        1. Gehen Sie in Ihrem Dashboard zu [Authentication](https://dashboard.mintlify.com/settings/deployment/authentication).
        2. Wählen Sie **Full Authentication** oder **Partial Authentication**.
        3. Wählen Sie **JWT**.
        4. Geben Sie die URL Ihres bestehenden Login-Flows ein und wählen Sie **Save changes**.
        5. Wählen Sie **Generate new key**.
        6. Speichern Sie Ihren Schlüssel sicher, sodass Ihr Backend darauf zugreifen kann.
      </Step>

      <Step title="Mintlify-Authentifizierung in Ihren Login-Flow integrieren.">
        Passen Sie Ihren bestehenden Login-Flow so an, dass nach der Benutzeranmeldung folgende Schritte ausgeführt werden:

        - Erstellen Sie ein JWT, das die Informationen des authentifizierten Benutzers im `User`-Format enthält. Siehe [User data format](/de/authentication-personalization/personalization-setup#user-data-format) für weitere Informationen.
        - Signieren Sie das JWT mit Ihrem geheimen Schlüssel unter Verwendung des EdDSA-Algorithmus.
        - Erstellen Sie eine Redirect-URL zurück zum Pfad `/login/jwt-callback` Ihrer Docs und fügen Sie das JWT als Hash hinzu.
      </Step>
    </Steps>

    ### Beispiel

    Ihre Dokumentation wird unter `docs.foo.com` gehostet, mit einem bestehenden Authentifizierungssystem unter `foo.com`. Sie möchten Ihren Login-Flow erweitern, um Zugriff auf die Docs zu gewähren, während die Docs von Ihrem Dashboard getrennt bleiben (oder Sie kein Dashboard haben).

    Erstellen Sie einen Login-Endpunkt unter `https://foo.com/docs-login`, der Ihre bestehende Authentifizierung erweitert.

    Nach der Überprüfung der Benutzeranmeldedaten:

    - Generieren Sie ein JWT mit Benutzerdaten im Mintlify-Format.
    - Signieren Sie das JWT und leiten Sie weiter zu `https://docs.foo.com/login/jwt-callback#{SIGNED_JWT}`.

    <CodeGroup>
      ```ts TypeScript
      import * as jose from 'jose';
      import { Request, Response } from 'express';

      const TWO_WEEKS_IN_MS = 1000 * 60 * 60 * 24 * 7 * 2;

      const signingKey = await jose.importPKCS8(process.env.MINTLIFY_PRIVATE_KEY, 'EdDSA');

      export async function handleRequest(req: Request, res: Response) {
        const user = {
          expiresAt: Math.floor((Date.now() + TWO_WEEKS_IN_MS) / 1000), // 2-wöchiges Sitzungsende
          groups: res.locals.user.groups,
          content: {
            firstName: res.locals.user.firstName,
            lastName: res.locals.user.lastName,
          },
        };

        const jwt = await new jose.SignJWT(user)
          .setProtectedHeader({ alg: 'EdDSA' })
          .setExpirationTime('10 s') // 10 Sekunden JWT-Ablauf
          .sign(signingKey);

        return res.redirect(`https://docs.foo.com/login/jwt-callback#${jwt}`);
      }
      ```

      ```python Python
      import jwt # pyjwt
      import os

      from datetime import datetime, timedelta
      from fastapi.responses import RedirectResponse

      private_key = os.getenv(MINTLIFY_JWT_PEM_SECRET_NAME, '')

      @router.get('/auth')
      async def return_mintlify_auth_status(current_user):
        jwt_token = jwt.encode(
          payload={
            'exp': int((datetime.now() + timedelta(seconds=10)).timestamp()),    # 10 Sekunden JWT-Ablauf
            'expiresAt': int((datetime.now() + timedelta(weeks=2)).timestamp()), # 2-wöchiges Sitzungsende
            'groups': ['admin'] if current_user.is_admin else [],
            'content': {
              'firstName': current_user.first_name,
              'lastName': current_user.last_name,
            },
          },
          key=private_key,
          algorithm='EdDSA'
        )

        return RedirectResponse(url=f'https://docs.foo.com/login/jwt-callback#{jwt_token}', status_code=302)
      ```
    </CodeGroup>

    ### Weiterleitung nicht authentifizierter Benutzer

    Wenn ein nicht authentifizierter Benutzer versucht, auf eine geschützte Seite zuzugreifen, bleibt sein beabsichtigtes Ziel in der Weiterleitung zu Ihrer Login-URL erhalten:

    1. Der Benutzer versucht, eine geschützte Seite zu besuchen: `https://docs.foo.com/quickstart`.
    2. Weiterleitung zu Ihrer Login-URL mit einem Redirect-Query-Parameter: `https://foo.com/docs-login?redirect=%2Fquickstart`.
    3. Nach der Authentifizierung Weiterleitung zu `https://docs.foo.com/login/jwt-callback?redirect=%2Fquickstart#{SIGNED_JWT}`.
    4. Der Benutzer landet an seinem ursprünglichen Ziel.
  </Tab>
</Tabs>

<div id="making-pages-public">
  ## Seiten öffentlich machen
</div>

Bei Verwendung der Teil-Authentifizierung sind standardmäßig alle Seiten geschützt. Mit der Eigenschaft `public` können Sie bestimmte Seiten auf Seiten- oder Gruppenebene ohne Authentifizierung zugänglich machen.

<div id="page-level">
  ### Seitenebene
</div>

Um eine Seite öffentlich zu machen, fügen Sie `public: true` in das Frontmatter der Seite ein.

```mdx Public page example
---
title: "Öffentliche Seite"
public: true
---
```

<div id="group-level">
  ### Gruppenebene
</div>

Um alle Seiten in einer Gruppe öffentlich zu machen, fügen Sie `"public": true` unter dem Namen der Gruppe im `navigation`-Objekt Ihrer `docs.json` hinzu.

```json Public group example
{
  "navigation": {
    "groups": [
      {
        "group": "Öffentliche Gruppe",
        "public": true,
        "icon": "play",
        "pages": [
          "quickstart",
          "installation",
          "settings"
        ]
      },
      {
        "group": "Private Gruppe",
        "icon": "pause",
        "pages": [
          "private-information",
          "secret-settings"
        ]
      }
    ]
  }
}
```