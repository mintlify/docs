---
title: "CI 检查"
description: "在更新流程中添加断链检测、规范检查和语法检查"
icon: "circle-check"
---

<Info>
  [Pro 和 Enterprise 方案](https://mintlify.com/pricing?ref=docs-ci)包含针对 GitHub 仓库的 CI 检查。
</Info>

使用 CI 检查对文档进行 lint，捕捉错误，并在部署前提供 Warning。CI 检查会在向已配置的部署用分支提交，或对该分支发起拉取请求（PR；亦称“合并请求”/Merge Request）时运行。

<div id="installation">
  ## 安装
</div>

首先，请按照 [GitHub](/zh/settings/github) 页面上的步骤进行。

对于 GitHub 应用，你可以选择仅为单个存储库授予权限。我们强烈建议这样做，因为我们只需要访问托管你文档的那个存储库。

<div id="configuration">
  ## 配置
</div>

前往控制台的 [附加组件](https://dashboard.mintlify.com/products/addons) 页面，配置在某次部署中启用的 CI 检查。启用你希望运行的检查项。

启用检查时，你可以选择将其设置为 `Warning` 或 `Blocking` 级别运行。

* `Warning` 级别的检查即使存在错误或建议，也不会标记为失败。
* `Blocking` 级别的检查如果未通过，或提出了更改建议，则会标记为失败。

<div id="available-ci-checks">
  ## 可用的 CI 检查
</div>

<div id="broken-links">
  ### 失效链接
</div>

与本地机器上的 [CLI 链接检查器](/zh/settings/broken-links#broken-links)工作方式类似，我们会自动检查你的文档是否存在失效链接。

要查看此检查的结果，请前往 GitHub 上该特定提交的检查结果页面。

<div id="vale">
  ### Vale
</div>

[Vale](https://vale.sh/) 是一款开源、基于规则的文本 Linter，支持多种文档类型，包括 Markdown 和 MDX。

Mintlify 支持在 CI 检查中自动运行 Vale，并将结果显示为检查状态。

<div id="configuration">
  #### 配置
</div>

如果你的部署根内容目录中有 `.vale.ini` 文件，我们会自动使用该配置文件。同时，我们也会自动使用你在 `stylesPath` 中指定的任何配置文件。

如果你没有 Vale 配置文件，将自动采用默认配置。

```mdx Default vale.ini configuration expandable
# 顶级样式
StylesPath = /app/styles
MinAlertLevel = suggestion
IgnoredScopes = code, tt, img, url, a
SkippedScopes = script, style, pre, figure, code

# 词汇表
Vocab = Mintlify

# 这是必需的，因为 Vale 官方不支持 MDX
[formats]
mdx = md

# MDX 支持
[*.mdx]
BasedOnStyles = Vale
Vale.Terms = NO # 强制执行非常严格的大小写规则，保持关闭

# `import ...`, `export ...`
# `<Component ... />`
# `<Component>...</Component>`
# `{ ... }`
TokenIgnores = (?sm)((?:import|export) .+?$), \
(?<!`)(<\w+ ?.+ ?\/>)(?!`), \
(<[A-Z]\w+>.+?<\/[A-Z]\w+>)

# 排除：
# `<Component \n ... />`
BlockIgnores = (?sm)^(<\w+\n .*\s\/>)$, \
(?sm)^({.+.*})

CommentDelimiters = {/*, */}
```

```text Default Vale vocabulary expandable
Mintlify
mintlify
VSCode
openapi
OpenAPI
GitHub
API

repo
npm
dev

Lorem
ipsum
impsum
amet

const
myName
myObject
bearerAuth
favicon
topbar
url
borderRadius
args
modeToggle
ModeToggle
isHidden
autoplay

_italic_
Strikethrough
Blockquotes
Blockquote
Singleline
Multiline

onboarding

async
await
boolean
enum
func
impl
init
instanceof
typeof
params
stdin
stdout
stderr
stdout
stdin
var
const
let
null
undefined
struct
bool

cors
csrf
env
xhr
xhr2
jwt
oauth
websocket
localhost
middleware
runtime
webhook
stdin
stdout

json
yaml
yml
md
txt
tsx
jsx
css
scss
html
png
jpg
svg

cdn
命令行界面（CLI）
css
dom
dto
env
Git
gui
http
https
ide
jvm
mvc
orm
rpc
SDK
sql
ssh
ssl
tcp
tls
uri
URL
ux
ui

nodejs
npm
yarn
pnpm
eslint
pytest
golang
rustc
kubectl
mongo
postgres
redis

JavaScript
TypeScript
Python
Ruby
Rust
Go
Golang
Java
Kotlin
Swift
Node.js
NodeJS
Deno

React
Vue
Angular
Next.js
Nuxt
Express
Django
Flask
Spring
Laravel
Redux
Vuex
TensorFlow
PostgreSQL
MongoDB
Redis
PNPM

Docker
Kubernetes
AWS
Azure
GCP
Terraform
Jenkins
CircleCI
GitLab
Heroku

Git
git
GitHub
GitLab
Bitbucket
VSCode
Visual Studio Code
IntelliJ
WebStorm
ESLint
eslint
Prettier
prettier
Webpack
webpack
Vite
vite
Babel
babel
Jest
jest
Mocha
Cypress
Postman

HTTP
HTTPS
OAuth
JWT（JSON Web Token）
GraphQL
REST
WebSocket
TCP/IP

NPM
Yarn
PNPM
Pip
PIP
Cargo
RubyGems

Swagger
OpenAPI
Markdown
MDX
Storybook
TypeDoc
JSDoc

MySQL
PostgreSQL
MongoDB
Redis
Elasticsearch
DynamoDB

Linux
Unix
macOS
iOS

Firefox
Chromium
WebKit

config
ctx
desc
dir
elem
err
len
msg
num
obj
prev
proc
ptr
req
res
str
tmp
val
vars

todo
href
lang
nav
prev
next
toc
```

<Warning>
  请注意，出于安全原因，我们不支持任何绝对路径的 `stylesPath`，也不支持包含 `..` 的 `stylesPath`。请使用相对路径，并将 `stylesPath` 提交到你的存储库中。
</Warning>

<div id="packages">
  #### 包
</div>

Vale 支持一系列[包](https://vale.sh/docs/keys/packages)，可用于检查拼写和文体错误。
任何放在存储库中正确的 `stylesPath` 路径下的包都会被自动安装，并用于你的 Vale 配置。

对于未包含在存储库中的包，你可以指定来自 [Vale package registry](https://vale.sh/explorer) 的任何包，它们会被自动下载并用于你的 Vale 配置。

<Warning>
  请注意，出于安全原因，我们不支持自动下载不来自 [Vale package registry](https://vale.sh/explorer) 的包。
</Warning>

<div id="vale-with-mdx">
  #### 将 Vale 与 `MDX` 搭配使用
</div>

Vale 并不原生支持 `MDX`，但 Vale 的作者提供了一个[自定义扩展](https://github.com/errata-ai/MDX)来实现支持。

如果你不想使用此扩展，建议在你的 `.vale.ini` 文件中加入以下配置行：

```ini
[formats]
mdx = md

[*.mdx]
CommentDelimiters = {/*, */}

TokenIgnores = (?sm)((?:import|export) .+?$), \
(?<!`)(<\w+ ?.+ ?\/>)(?!`), \
(<[A-Z]\w+>.+?<\/[A-Z]\w+>)

BlockIgnores = (?sm)^(<\w+\n .*\s\/>)$, \
(?sm)^({.+.*})
```

要在文档中使用 Vale 的行内注释，请使用 MDX 风格的注释 `{/* ... */}`。如果你在配置中启用 `CommentDelimiters = {/*, */}` [设置](https://vale.sh/docs/keys/commentdelimiters)，Vale 会在 lint 时自动识别这些注释。这意味着你可以轻松使用 Vale 的内置功能，比如跳过某些行或段落。

```mdx
{/* vale off */}

此文本将被 Vale 忽略

{/* vale on */}
```

如果你选择不使用 `CommentDelimiters`，但仍要使用 Vale 的注释，则必须将所有 Vale 注释包裹在 MDX 注释 `{/* ... */}` 中。例如：

```mdx
{/* <!-- vale off --> */}

此文本将被 Vale 忽略

{/* <!-- vale on --> */}
```

这些注释标签在 Mintlify 组件内不受支持，但可在文档的顶层任意位置使用。
