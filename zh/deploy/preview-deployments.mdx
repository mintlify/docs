---
title: "预览部署"
description: "为拉取请求生成唯一的预览 URL，在合并前审阅更改。"
keywords: ["preview URLs", "pull request previews", "branch previews", "staging environments"]
---

<Info>
  预览部署适用于 [Pro 和 Custom 方案](https://mintlify.com/pricing?ref=preview-deployments)。
</Info>

预览部署可让你在合并到生产环境之前先查看文档更改的实际效果。每次预览都会生成一个可共享的 URL，并会在你推送新更改时自动更新。

预览 URL 默认对所有人可见。将预览链接分享给任何需要审阅你更改的人。

<div id="create-preview-deployments">
  ## 创建预览部署
</div>

预览部署会在拉取请求（PR；亦称“合并请求”/Merge Request）中自动创建，或可从你的控制台手动创建。

<div id="automatic-previews">
  ### 自动预览
</div>

<Note>
  仅针对以你的[部署用分支](/zh/guides/git-concepts#deployment-branch)为目标的拉取请求（PR）创建自动预览。
</Note>

当你创建拉取请求（PR；亦称“合并请求”/Merge Request）时，Mintlify 机器人会在你的拉取请求中自动添加一个链接，用于查看预览部署。每次你向该 branch 推送新的提交时，预览都会更新。

<Frame>
  <img src="/images/previews/preview-deployment-light.png" alt="在拉取请求时间线中查看部署的链接" className="block dark:hidden" />

  <img src="/images/previews/preview-deployment-dark.png" alt="在拉取请求时间线中查看部署的链接" className="hidden dark:block" />
</Frame>

<div id="manual-previews">
  ### 手动预览
</div>

你可以为任意 branch 手动创建预览。

1. 前往你的[控制台](https://dashboard.mintlify.com/)。
2. 选择 **Previews**。
3. 选择 **Create custom preview**。
4. 输入要预览的 branch 名称。
5. 选择 **Create deployment**。

<div id="redeploy-a-preview">
  ## 重新部署预览
</div>

当需要刷新内容，或在部署失败后重试时，可重新部署预览。

1. 在你的[控制台](https://dashboard.mintlify.com/)中选择该预览。
2. 选择**重新部署**。

<Frame>
  <img src="/images/previews/redeploy-preview-light.png" alt="“预览”菜单中，部署按钮被橙色矩形高亮显示。" className="block dark:hidden" />

  <img src="/images/previews/redeploy-preview-dark.png" alt="“预览”菜单中，部署按钮被橙色矩形高亮显示。" className="hidden dark:block" />
</Frame>

<div id="preview-widget">
  ## 预览小部件
</div>

预览小部件会出现在预览部署环境中，帮助你导航并查看更新后的页面。该小部件以一个浮动按钮的形式出现在预览部署页面的右下角。

<Frame>
  <img src="/images/previews/widget-light.png" alt="展开的预览小部件，显示已更改文件列表。" className="block dark:hidden" />

  <img src="/images/previews/widget-dark.png" alt="展开的预览小部件，显示已更改文件列表。" className="hidden dark:block" />
</Frame>

1. 点击小部件以显示预览中所有新增、修改或移除的文件。
2. 点击某个文件以在对应页面查看更改。
3. 使用搜索栏筛选已更改文件列表。

小部件只会出现在预览部署中，不会显示在你的线上站点或本地预览中。

<div id="restrict-access-to-preview-deployments">
  ## 限制预览部署的访问权限
</div>

默认情况下，任何持有 URL 的人都可以公开访问预览部署。你可以将访问权限限制为 Mintlify 组织中的已认证成员。

1. 在控制台的 [附加组件](https://dashboard.mintlify.com/products/addons) 页面，进入 **Previews** 部分。
2. 点击 **Preview authentication** 开关以启用或禁用预览认证。

<Frame>
  <img src="/images/previews/preview-auth-light.png" alt="附加组件页面中的预览认证开关" className="block dark:hidden" />

  <img src="/images/previews/preview-auth-dark.png" alt="附加组件页面中的预览认证开关" className="hidden dark:block" />
</Frame>

<div id="troubleshooting-preview-deployments">
  ## 预览部署故障排查
</div>

如果预览部署失败，请尝试以下排查步骤。

* **查看构建日志**：在你的[控制台](https://dashboard.mintlify.com/)中，进入 **Previews** 并点击失败的预览。部署日志会显示导致失败的错误。
* **检查配置**：
  * `docs.json` 语法无效
  * 导航中引用的文件路径缺失或不正确
  * MDX 文件中的 frontmatter 无效
  * 图片链接损坏或图片文件缺失
* **本地验证**：在本地运行 `mint dev`，在推送到存储库之前先发现构建错误。
* **检查最近变更**：查看分支中最近的提交，找出导致构建失败的变更。