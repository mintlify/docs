---
title: "CLI 安装"
sidebarTitle: "安装"
description: "安装 CLI，在本地预览并开发你的文档"
icon: "terminal"
---

<img className="block dark:hidden my-0 pointer-events-none" src="/images/installation/local-development-light.png" />

<img className="hidden dark:block my-0 pointer-events-none" src="/images/installation/local-development-dark.png" />

## 安装命令行工具

<Info>
  **前提条件**：请先安装 [Node.js](https://nodejs.org/en) 后再继续。
</Info>

<Steps>
  <Step title="安装命令行工具">
    运行以下命令安装 [CLI](https://www.npmjs.com/package/mint)：

    <CodeGroup>
      ```bash npm
      npm i -g mint
      ```

      ```bash pnpm
      pnpm add -g mint
      ```
    </CodeGroup>
  </Step>

  <Step title="本地预览">
    进入你的文档目录（`docs.json` 文件所在位置），并执行以下命令：

    ```bash
    mint dev
    ```

    你的文档将在本地通过 `http://localhost:3000` 提供预览。
  </Step>
</Steps>

或者，如果你不想全局安装命令行工具，可以运行一次性脚本：

```bash
npx mint dev
```

## 更新

如果你的本地预览与线上生产环境显示不一致，请更新本地 CLI：

```bash
mint update
```

如果当前本地版本不支持 `mint update` 命令，请重新安装最新版本的 CLI：

<CodeGroup>
  ```bash npm
  npm i -g mint@latest
  ```

  ```bash pnpm
  pnpm add -g mint@latest
  ```
</CodeGroup>

## 自定义端口

默认情况下，CLI 使用 3000 端口。你可以通过 `--port` 标志自定义端口。比如，要在 3333 端口运行 CLI，请使用以下命令：

```bash
mint dev --port 3333
```

如果你尝试使用的端口已被占用，CLI 会使用下一个可用端口：

```mdx
端口 3000 已被占用。尝试使用 3001。
```

## 以特定用户组预览

如果你使用部分认证来限制文档访问，可以通过 `--group [groupname]` 标志以指定的认证用户组身份进行预览。

例如，如果你有一个名为 `admin` 的用户组，可以使用以下命令以该组成员身份进行预览：

```bash
mint dev --group admin
```

## 其他命令

虽然 `mint dev` 是最常用的命令，但你还可以使用其他命令来管理文档。

### 查找失效链接

Mint命令行工具可以帮助校验文档中的引用链接。要定位任何失效链接，请使用以下命令：

```bash
mint broken-links
```

### 检查 OpenAPI 规范

你可以使用 Mint命令行工具通过以下命令检查 OpenAPI 文件是否存在错误：

```bash
mint openapi-check <openapiFilenameOrUrl>
```

你可以传入文件名（例如 `./openapi.yaml`）或 URL（例如 `https://petstore3.swagger.io/api/v3/openapi.json`）。

### 重命名文件

你可以使用以下命令重命名文件并更新对该文件的所有引用：

```bash
mint rename <oldFilename> <newFilename>
```

### 迁移 MDX 端点页面

你可以使用以下命令将 MDX 端点页面迁移为基于 OpenAPI 规范自动生成的页面：

```bash
mint migrate-mdx
```

该命令会将单独的 MDX 端点页面转换为在 `docs.json配置文件` 中定义的自动生成页面，将 MDX 内容移动到 OpenAPI 规范中的 Mintlify OpenAPI扩展（`x-mint`），并更新导航。详见 [从 MDX 迁移](/zh/api-playground/migrating-from-mdx) 获取详细信息。

## 格式化

在本地开发时，建议在 IDE 中安装扩展以识别并格式化 `MDX` 文件。

如果你使用 Cursor、Windsurf 或 VS Code，推荐安装用于语法高亮的 [MDX VS Code 扩展](https://marketplace.visualstudio.com/items?itemName=unifiedjs.vscode-mdx)，以及用于代码格式化的 [Prettier](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)。

如果你使用 JetBrains，推荐安装用于语法高亮的 [MDX IntelliJ IDEA 插件](https://plugins.jetbrains.com/plugin/14944-mdx)，并配置 [Prettier](https://prettier.io/docs/webstorm) 进行代码格式化。

## 疑难解答

<AccordionGroup>
  <Accordion title="Error: Could not load the &#x22;sharp&#x22; module using the darwin-arm64 runtime">
    这可能是由于 Node 版本过旧。请尝试以下操作：

    1. 卸载当前安装的 Mint 命令行工具：`npm uninstall -g mint`
    2. 升级到最新的 Node.js。
    3. 重新安装 Mint 命令行工具：`npm install -g mint`
  </Accordion>

  <Accordion title="Issue: Encountering an unknown error">
    **解决方案**：前往用户根目录并删除 `~/.mintlify` 文件夹。然后再次运行 `mint dev`。
  </Accordion>

  <Accordion title="Error: permission denied">
    原因是没有全局安装 Node 包所需的权限。

    **解决方案**：尝试运行 `sudo npm i -g mint`。系统会提示你输入密码，即用于解锁电脑的那一组密码。
  </Accordion>

  <Accordion title="The local preview doesn't look the same as my docs do on the web">
    这通常是由于 CLI 版本过旧。

    **解决方案：** 运行 `mint update` 获取最新更新。
  </Accordion>

  <Accordion title="mintlify vs. mint package">
    如果你在使用 CLI 包时遇到问题，请先运行 `npm ls -g`。该命令会显示你的机器上全局安装了哪些包。

    如果你不使用 npm，或在 -g 列表中未看到它，请尝试运行 `which mint` 来定位安装路径。

    如果同时安装了名为 `mint` 和 `mintlify` 的包，应卸载 `mintlify`。

    1. 卸载旧包：

    ```bash
      npm uninstall -g mintlify
    ```

    2. 清理 npm 缓存：

    ```bash
      npm cache clean --force
    ```

    3. 重新安装新包：

    ```bash
    npm i -g mint
    ```
  </Accordion>
</AccordionGroup>
